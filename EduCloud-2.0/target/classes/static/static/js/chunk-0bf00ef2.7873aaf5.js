(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bf00ef2"],{"23d7":function(o,t,e){"use strict";e.d(t,"c",(function(){return s})),e.d(t,"o",(function(){return i})),e.d(t,"q",(function(){return l})),e.d(t,"h",(function(){return a})),e.d(t,"j",(function(){return r})),e.d(t,"d",(function(){return c})),e.d(t,"n",(function(){return d})),e.d(t,"k",(function(){return u})),e.d(t,"l",(function(){return h})),e.d(t,"m",(function(){return m})),e.d(t,"f",(function(){return p})),e.d(t,"b",(function(){return g})),e.d(t,"e",(function(){return f})),e.d(t,"p",(function(){return b})),e.d(t,"i",(function(){return y})),e.d(t,"g",(function(){return I})),e.d(t,"a",(function(){return w}));var n=e("b775");function s(o){return Object(n["a"])({url:"/addScoreGoods",method:"post",data:o})}function i(o){return Object(n["a"])({url:"/queryScoreDisable",method:"get",params:o})}function l(o){return Object(n["a"])({url:"/updateScoreDisable",method:"get",params:o})}function a(o){return Object(n["a"])({url:"/queryGoodsBySchoolId",method:"post",data:o})}function r(o){return Object(n["a"])({url:"/queryGoodsTypeBySchoolId",method:"get",params:o})}function c(o){return Object(n["a"])({url:"/deleteGoodsByGoodsId",method:"get",params:o})}function d(o){return Object(n["a"])({url:"/applet/querySchoolByCompanyId",method:"get",params:o})}function u(o){return Object(n["a"])({url:"/queryOrderByOrderNum",method:"get",params:o})}function h(o){return Object(n["a"])({url:"/queryOrderBySchoolId",method:"post",data:o})}function m(o){return Object(n["a"])({url:"/queryOrderYwcAndDshNum",method:"get",params:o})}function p(o){return Object(n["a"])({url:"/getOrderNum",method:"get",params:o})}function g(o){return Object(n["a"])({url:"/addGoodsType",method:"post",data:o})}function f(o){return Object(n["a"])({url:"/deleteGoodsType",method:"get",params:o})}function b(o){return Object(n["a"])({url:"/queryScoreSumBySchoolId",method:"post",data:o})}function y(o){return Object(n["a"])({url:"/queryGoodsDetailByStudentId",method:"get",params:o})}function I(o){return Object(n["a"])({url:"/queryDynamicConditionBySchoolId",method:"get",params:o})}function w(o){return Object(n["a"])({url:"/addDynamicCondition",method:"post",data:o})}},"289c":function(o,t,e){"use strict";e.r(t);var n=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"content-body"},[o._m(0),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:o.schoolList,"tooltip-effect":"dark",height:o.tableHeight},on:{"selection-change":o.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),e("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),e("el-table-column",{attrs:{label:"校区",prop:"schoolName",width:"120"}}),e("el-table-column",{attrs:{label:"积分规则",sortable:"",prop:"",width:"120"}},[[e("el-button",{staticClass:"seeItem",attrs:{size:"mini"},on:{click:o.addclick}},[o._v("查看 / 编辑")])]],2)],1),e("div",{staticClass:"table-page__action"}),e("div",{staticClass:"addDialog"},[e("el-dialog",{attrs:{title:"修改积分规则",width:"600px","close-on-click-modal":!1,visible:o.isaddmaskshow},on:{"update:visible":function(t){o.isaddmaskshow=t}}},[e("el-form",{ref:"addForm",attrs:{"label-width":"80px",model:o.addForm}},[1==o.schoolList.length?e("el-form-item",{attrs:{label:"所在校区",prop:"goodsSchool"}},[e("el-select",{attrs:{placeholder:"请选择商品上架校区",disabled:""},model:{value:o.schoolList[0].schoolName,callback:function(t){o.$set(o.schoolList[0],"schoolName",t)},expression:"schoolList[0].schoolName"}})],1):e("el-form-item",{attrs:{label:"所在校区",prop:"goodsSchool"}},[e("el-select",{attrs:{placeholder:"请选择商品上架校区"},on:{change:o.changeSchoolId},model:{value:o.addForm.goodsSchool,callback:function(t){o.$set(o.addForm,"goodsSchool",t)},expression:"addForm.goodsSchool"}},o._l(o.schoolList,(function(o){return e("el-option",{key:o.schoolId,attrs:{value:o.schoolId,label:o.schoolName}})})),1)],1),e("el-form-item",{attrs:{label:"签到",prop:"applyTitle"}},[e("label",{attrs:{slot:"label"},slot:"label"},[o._v(" 签到 ")]),e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:o.rulesList.loginDynamicCondition,callback:function(t){o.$set(o.rulesList,"loginDynamicCondition",t)},expression:"rulesList.loginDynamicCondition"}})],1),e("el-form-item",{attrs:{label:"打卡",prop:"applyTitle"}},[e("label",{attrs:{slot:"label"},slot:"label"},[o._v(" 作业打卡 ")]),e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:o.rulesList.clockDynamicCondition,callback:function(t){o.$set(o.rulesList,"clockDynamicCondition",t)},expression:"rulesList.clockDynamicCondition"}})],1),e("el-form-item",{attrs:{label:"打卡通过",prop:"applyTitle"}},[e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:o.rulesList.reviewDynamicCondition,callback:function(t){o.$set(o.rulesList,"reviewDynamicCondition",t)},expression:"rulesList.reviewDynamicCondition"}})],1),e("el-form-item",{attrs:{label:"打卡评优",prop:"applyTitle"}},[e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:o.rulesList.goodDynamicCondition,callback:function(t){o.$set(o.rulesList,"goodDynamicCondition",t)},expression:"rulesList.goodDynamicCondition"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"noadd",on:{click:o.noaddclick}},[o._v("取消")]),e("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:o.okaddclick}},[o._v("确认")])],1)],1)],1),e("div",{staticClass:"personGoodsShow"},[e("el-dialog",{attrs:{title:"编辑核销员",width:"600px","close-on-click-modal":!1,visible:o.personGoodsShow},on:{"update:visible":function(t){o.personGoodsShow=t}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",height:"350"}},[e("el-table-column",{attrs:{prop:"",label:"老师姓名",width:""}}),e("el-table-column",{attrs:{prop:"",label:"手机号",width:""}}),e("el-table-column",{attrs:{prop:"",label:"绑定时间",width:""}}),e("el-table-column",{attrs:{prop:"",label:"校区",width:""}}),e("el-table-column",{attrs:{prop:"",label:"操作",width:""}})],1)],1),e("div")],1)],1)},s=[function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"table-action"},[e("div",{staticClass:"lf"}),e("div",{staticClass:"rt"})])}],i=(e("d81d"),e("9dac")),l=e("23d7"),a=(e("4260"),{components:{upload:i["a"]},data:function(){return{rules:[],tableHeight:window.innerHeight-210,tableData:[],isaddmaskshow:!1,iseditmaskshow:!1,personGoodsShow:!1,editContent:"",multipleSelection:[],valLength:"",searchInfo:"",timeout:null,pageCount:null,pageDataList:[],schoolId:"",teacherIds:"",loading:!1,adminName:"",num:0,addForm:{goodsSchool:""},storageArr:{companyId:"",schoolId:"",school:""},schoolList:[],rulesList:[]}},mounted:function(){this.getStorage(),this.getSchool()},methods:{getSchool:function(){var o=this;this.storageArr.school.map((function(t){t.schoolId==o.storageArr.schoolId&&(o.schoolList=[{schoolId:t.schoolId,schoolName:t.schoolName}])})),this.getIntegralRule(this.schoolList[0].schoolId)},getStorage:function(){this.storageArr.companyId=window.sessionStorage.getItem("companyId"),this.storageArr.schoolId=window.sessionStorage.getItem("schoolId"),this.storageArr.school=JSON.parse(window.sessionStorage.getItem("school"))},changeSchoolId:function(){this.getIntegralRule(this.addForm.goodsSchool)},getIntegralRule:function(o){var t=this;Object(l["g"])({schoolId:o}).then((function(o){t.rulesList=o.data}))},searchSchool:function(){var o=this;Object(l["n"])({companyId:window.sessionStorage.getItem("companyId")}).then((function(t){1==t.code?o.schoolList=[]:0==t.code&&(o.schoolList=t.msg),o.schoolList.length>1&&(o.storageArr.school.map((function(t){(t.schoolId=o.storageArr.schoolId)&&(o.addForm.goodsSchool={schoolId:o.storageArr.school.schoolId,schoolName:o.storageArr.school.schoolName})})),o.getIntegralRule(o.schoolList[0].schoolId))}))},rules_edit:function(){var o=this;Object(l["a"])({schoolId:this.rulesList.schoolId,dynamicConditionId:this.rulesList.dynamicConditionId,reviewDynamicCondition:this.rulesList.reviewDynamicCondition,shareDynamicCondition:this.rulesList.shareDynamicCondition,clockDynamicCondition:this.rulesList.clockDynamicCondition,loginDynamicCondition:this.rulesList.loginDynamicCondition}).then((function(t){0==t.code?o.$message.success(t.msg):1==t.code&&o.$message.error(t.msg),o.isaddmaskshow=!1}))},addclick:function(){var o=this;this.storageArr.school.map((function(t){t.schoolId==o.storageArr.schoolId&&(o.schoolList=[{schoolId:t.schoolId,schoolName:t.schoolName}])})),this.getIntegralRule(this.schoolList[0].schoolId),this.isaddmaskshow=!0,console.log(this.schoolList,this.storageArr.school)},noaddclick:function(){this.isaddmaskshow=!1},okaddclick:function(){this.rules_edit()},handleSelectionChange:function(o){this.multipleSelection=o,this.valLength=o.length}}}),r=a,c=(e("ac75"),e("2877")),d=Object(c["a"])(r,n,s,!1,null,"797d4988",null);t["default"]=d.exports},ac75:function(o,t,e){"use strict";e("f8e3")},f8e3:function(o,t,e){}}]);