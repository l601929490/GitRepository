(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2570ae36"],{"63bc":function(t,e,s){"use strict";s("e0bb")},7772:function(t,e,s){},ac46:function(t,e,s){"use strict";s("7772")},c087:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-body"},[s("div",{staticClass:"table-action"},[s("div",{staticClass:"lf"}),s("div",{staticClass:"rt"},[s("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleProcessingStatus(t.valLength,t.multipleSelection)}}},[t._v("处理状态")])],1)]),s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:t.pageDataList,"tooltip-effect":"dark",height:t.tableHeight,"row-key":t.getRowKeys,"expand-row-keys":t.expands},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange,"expand-change":t.exChange}},[s("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),s("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),s("el-table-column",{attrs:{label:"用户电话",prop:"suggestPhone",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.suggestPhone.length?s("div",{staticClass:"nodata"},[t._v(" 暂无数据 ")]):s("div",[t._v(t._s(e.row.suggestPhone))])]}}])}),s("el-table-column",{attrs:{label:"投诉建议标题",prop:"suggestTitle",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.suggestTitle.length>10?s("div",[t._v(" "+t._s(e.row.suggestTitle.substring(0,10))+"... ")]):s("div",[t._v(t._s(e.row.suggestTitle))])]}}])}),s("el-table-column",{attrs:{label:"投诉建议详细描述",prop:"suggestContent",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.suggestContent.length>10?s("div",[t._v(" "+t._s(e.row.suggestContent.substring(0,10))+"... ")]):s("div",[t._v(t._s(e.row.suggestContent))])]}}])}),s("el-table-column",{attrs:{type:"expand",width:"150",label:"投诉建议详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[s("el-form-item",{attrs:{label:"投诉建议标题"}},[s("span",[t._v(t._s(e.row.suggestTitle))])]),s("el-form-item",{attrs:{label:"投诉建议详细描述"}},[s("span",[t._v(t._s(e.row.suggestContent))])])],1)]}}])}),s("el-table-column",{attrs:{label:"状态",prop:"status",width:"120",filters:[{text:"未处理",value:0},{text:"已处理",value:1}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?s("el-tag",{attrs:{type:"0"===e.row.status?"success":"primary","disable-transitions":""}},[t._v("未处理")]):t._e(),1==e.row.status?s("el-tag",{attrs:{type:"1"===e.row.status?"primary":"info","disable-transitions":""}},[t._v("已处理")]):t._e()]}}])}),s("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"creationTime",width:"200"}})],1),s("div",{staticClass:"table-page__action"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pageCount,"page-size":15},on:{"current-change":t.changePage}})],1),s("el-dialog",{attrs:{title:"改变投诉建议处理状态",width:"600px","close-on-click-modal":!1,visible:t.isProcessingStatusmaskshow},on:{"update:visible":function(e){t.isProcessingStatusmaskshow=e}}},[t.ProcessingStatusContent?s("el-form",{ref:"ProcessingStatusForm",attrs:{"label-width":"80px",model:t.ProcessingStatusContent}},[s("el-form-item",{attrs:{prop:"status"}},[s("el-radio-group",{model:{value:t.ProcessingStatusContent.status,callback:function(e){t.$set(t.ProcessingStatusContent,"status",e)},expression:"ProcessingStatusContent.status"}},[s("el-radio",{attrs:{label:1}},[t._v("已处理")]),s("el-radio",{attrs:{label:0}},[t._v("未处理")])],1)],1)],1):t._e(),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"no",on:{click:t.noProcessingStatusclick}},[t._v("取消")]),s("el-button",{staticClass:"ok",attrs:{type:"primary"},on:{click:t.okProcessingStatusclick}},[t._v("确认")])],1)],1)],1)},a=[],o=(s("a15b"),s("d3b7"),s("5530")),i=s("f6b0"),l=(s("4260"),{data:function(){return{tableHeight:window.innerHeight-210,tableData:[],multipleSelection:[],valLength:"",searchInfo:"",page:1,pageCount:null,pageDataList:[],suggestTitle:"",suggestContent:"",CustomerIdList:[],value:"",schoolId:"",adminName:"",isProcessingStatusmaskshow:!1,ProcessingStatusContent:{status:1},expands:[],getRowKeys:function(t){return t.suggestId}}},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},handleRowClick:function(t,e,s){this.$refs.multipleTable.toggleRowSelection(t)},searchCustomerInfo:function(){this.getChangePage({CustomerName:this.searchInfo})},handleProcessingStatus:function(t,e){if(t){this.isProcessingStatusmaskshow=!0;for(var s=[],n=0;n<e.length;n++){var a=e[n].suggestId;s.push(a),this.suggestIdsProcessingStatus=s}}else this.$message.error("您还未选择要处理的投诉建议")},noProcessingStatusclick:function(){this.isProcessingStatusmaskshow=!1},okProcessingStatusclick:function(){this.isProcessingStatusmaskshow=!0,this.getProcessingStatus()},getProcessingStatus:function(){var t=this;this.loading=!0,Object(i["f"])(Object(o["a"])(Object(o["a"])({},this.ProcessingStatusContent),{},{suggestIds:this.suggestIdsProcessingStatus.join(","),schoolId:this.schoolId})).then((function(e){1==e.code?t.$message.error(e.msg):(t.$message.success(e.msg),t.isProcessingStatusmaskshow=!1,t.getChangePage({page:t.page,limit:15}))})).finally((function(){t.loading=!1}))},getChangePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["e"])(Object(o["a"])(Object(o["a"])({},e),{},{schoolId:this.schoolId})).then((function(e){t.pageCount=e.pageCount,t.pageDataList=e.data}))},changePage:function(t){this.page=t,this.getChangePage({page:t,limit:15})},filterTag:function(t,e){return e.status===t},exChange:function(t,e){e.length?(this.expands=[],t&&this.expands.push(t.suggestId)):this.expands=[]}},mounted:function(){var t=sessionStorage.getItem("schoolId",t);this.schoolId=t;var e=sessionStorage.getItem("adminName",e);this.adminName=e,this.getChangePage({page:1,limit:15})}}),r=l,u=(s("ac46"),s("63bc"),s("2877")),c=Object(u["a"])(r,n,a,!1,null,"6776b1cf",null);e["default"]=c.exports},e0bb:function(t,e,s){},f6b0:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return i})),s.d(e,"d",(function(){return l})),s.d(e,"f",(function(){return r})),s.d(e,"e",(function(){return u}));var n=s("b775");function a(t){return Object(n["a"])({url:"/limitClients",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/limitClientsAccomplish",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/getAllClass",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/limitClientsFail",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/updateSuggestStatus",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/limitSuggest",method:"get",params:t})}}}]);