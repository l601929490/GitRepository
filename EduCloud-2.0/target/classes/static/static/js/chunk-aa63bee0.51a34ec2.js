(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa63bee0"],{"2ea9":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content-body"},[o("div",{staticClass:"table-action"},[o("div",{staticClass:"lf"}),o("div",{staticClass:"rt"},[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addclick}},[t._v("新增")]),o("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(t.valLength,t.multipleSelection)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteClick(t.valLength,t.multipleSelection)}}},[t._v("删除")])],1)]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table-box",staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:t.pageDataList,"tooltip-effect":"dark",height:t.tableHeight,"element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)"},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"100",fixed:""}}),o("el-table-column",{attrs:{label:"编号",type:"index",width:"100"}}),o("el-table-column",{attrs:{label:"荣誉资质",prop:"honorImg",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[o("el-image",{staticStyle:{width:"50px",height:"30px"},attrs:{src:e.row.honorImg,fit:"scale-down","preview-src-list":t.honorImgAll}})],1)]}}])}),o("el-table-column",{attrs:{label:"创建人",sortable:"",prop:"honorCreator",width:"150"}}),o("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"honorCreationTime",width:"200"}}),o("el-table-column",{attrs:{label:"编辑人",sortable:"",prop:"honorEditor",width:"150"}}),o("el-table-column",{attrs:{label:"最后一次编辑时间",sortable:"",prop:"honorEditSession",width:"200"}})],1),o("div",{staticClass:"table-page__action"},[o("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pageCount,"page-size":10},on:{"current-change":t.changePage}})],1),o("el-dialog",{attrs:{title:"新增轮播图片",width:"600px","close-on-click-modal":!1,visible:t.isaddmaskshow},on:{"update:visible":function(e){t.isaddmaskshow=e}}},[t.isaddmaskshow?o("TheForm",{ref:"newForm"}):t._e(),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"noadd",on:{click:t.noaddclick}},[t._v("取消")]),o("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:t.okaddclick}},[t._v("确认")])],1)],1),o("el-dialog",{attrs:{title:"编辑轮播图片",width:"600px","close-on-click-modal":!1,visible:t.iseditmaskshow},on:{"update:visible":function(e){t.iseditmaskshow=e}}},[t.iseditmaskshow?o("TheForm",{ref:"editForm",attrs:{type:"edit"}}):t._e(),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"noedit",on:{click:t.noEditclick}},[t._v("取消")]),o("el-button",{staticClass:"okedit",attrs:{type:"primary"},on:{click:t.okEditclick}},[t._v("确认")])],1)],1)],1)},a=[],i=(o("a15b"),o("d3b7"),o("5530")),r=(o("96cf"),o("1da1")),s=o("9dac"),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.form?o("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.form,rules:t.rules}},[o("el-form-item",{ref:"uploadForm",staticClass:"upload-img-form",attrs:{prop:"honorImg",label:"荣誉资质"}},[o("upload",{attrs:{params:{companyId:t.companyId}},model:{value:t.form.honorImg,callback:function(e){t.$set(t.form,"honorImg",e)},expression:"form.honorImg"}}),o("div",{},[t._v("(建议上传文件大小不超过200KB，图片宽:高——4:3)")])],1)],1):t._e()},l=[],d=o("4260"),u={props:{type:{type:String,default:"new"}},components:{upload:s["a"]},data:function(){return{rules:{honorImg:[{required:!0,message:"请上传图片",trigger:"blur"}]},form:{honorImg:""},defaultForm:{},companyId:""}},watch:{},created:function(){this.init();var t=sessionStorage.getItem("companyId",t);this.companyId=t},mounted:function(){},methods:{isPass:function(){var t=this;return new Promise((function(e){var o=t.$refs.form;o.validate((function(t){e(t)}))}))},init:function(){this.defaultForm=Object(d["a"])(this.form)},getValue:function(){var t=Object(d["a"])(this.form);return t},setValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.form=Object(d["a"])(t),console.log("this.form",this.form)},reset:function(){this.form=Object(d["a"])(this.defaultForm),this.$refs.form.resetFields()}},computed:{},filters:{}},h=u,m=o("2877"),f=Object(m["a"])(h,c,l,!1,null,"44b6edea",null),g=f.exports,p=o("caa4"),b=(o("56b3"),{components:{upload:s["a"],TheForm:g},data:function(){return{tableHeight:window.innerHeight-210,tableData:[],editContent:"",isaddmaskshow:!1,iseditmaskshow:!1,filePath:"",multipleSelection:[],valLength:"",selectUploadFileBtn:!0,pageCount:null,pageDataList:[],honorImgAll:[],searchInfo:"",schoolId:"",companyId:"",adminName:"",loading:!1}},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},handleRowClick:function(t,e,o){this.$refs.multipleTable.toggleRowSelection(t)},addConsult:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.newForm.isPass();case 2:if(o=e.sent,0!=o){e.next=5;break}return e.abrupt("return");case 5:n=t.$refs.newForm.getValue(),t.loading=!0,Object(p["b"])(Object(i["a"])(Object(i["a"])({},n),{},{honorCreator:t.adminName,schoolId:t.schoolId})).then((function(e){1==e.code?t.$message.error(e.msg):(t.isaddmaskshow=!1,t.$message.success(e.msg),t.getChangePage({page:1,limit:10}))})).finally((function(){t.loading=!1}));case 8:case"end":return e.stop()}}),e)})))()},addclick:function(){var t=this;this.isaddmaskshow=!0,this.$nextTick((function(){t.$refs.newForm.reset()}))},noaddclick:function(){this.isaddmaskshow=!1},okaddclick:function(){this.addConsult()},EditInfo:function(){var t=this;this.loading=!0;var e=this.$refs.editForm.getValue();Object(p["l"])(Object(i["a"])(Object(i["a"])({},e),{},{honorEditor:this.adminName,schoolId:this.schoolId})).then((function(e){t.iseditmaskshow=!1,1==e.code?t.$message.error(e.msg):(t.$message.success(e.msg),t.getChangePage({page:1,limit:10}))})).finally((function(){t.loading=!1}))},handleEdit:function(t,e){var o=this;if(t){if(1==t)this.iseditmaskshow=!0,this.editContent=Object(d["a"])(e[0]),this.$nextTick((function(){o.$refs.editForm.reset(),o.$refs.editForm.setValue(o.editContent)}));else if(t>1)return void this.$message.error("您只能选择一个要编辑的内容")}else this.$message.error("您还未选择要编辑的内容")},okEditclick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.editForm.isPass();case 2:if(o=e.sent,0!=o){e.next=5;break}return e.abrupt("return");case 5:t.iseditmaskshow=!1,t.EditInfo();case 7:case"end":return e.stop()}}),e)})))()},noEditclick:function(){this.iseditmaskshow=!1},deleteClick:function(t,e){var o=this;if(t){for(var n=[],a=0;a<e.length;a++){var i=e[a].schoolHonorId;n.push(i)}this.loading=!0,this.$confirm("确认要删除吗？").then((function(){Object(p["e"])({schoolHonorIds:n.join(",")}).then((function(t){1==t.code?o.$message.error(t.msg):(o.$message.success(t.msg),o.getChangePage({page:1,limit:10}))})).finally((function(){o.loading=!1}))}))}else this.$message.error("您还未选择要删除的内容")},getChangePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(p["h"])(Object(i["a"])(Object(i["a"])({},e),{},{schoolId:this.schoolId})).then((function(e){t.pageCount=e.pageCount;var o=e.data;t.pageDataList=e.data;for(var n=[],a=0;a<o.length;a++){var i=o[a].honorImg;n.push(i)}t.honorImgAll=n})).finally((function(){t.loading=!1}))},changePage:function(t){this.getChangePage({page:t,limit:10})},searchStudentInfo:function(){this.getChangePage({studentName:this.searchInfo})}},mounted:function(){var t=sessionStorage.getItem("schoolId",t);this.schoolId=t;var e=sessionStorage.getItem("companyId",e);this.companyId=e;var o=sessionStorage.getItem("adminName",o);this.adminName=o,this.getChangePage({page:1,limit:10})}}),v=b,w=(o("6654"),o("fb0d"),Object(m["a"])(v,n,a,!1,null,"3896ea56",null));e["default"]=w.exports},4260:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return i}));o("99af"),o("d3b7"),o("25f0");function n(t){var e,o=r(t);if("array"===o)e=[];else{if("object"!==o)return t;e={}}if("array"===o)for(var a=0,i=t.length;a<i;a++)e.push(n(t[a]));else if("object"===o)for(var s in t)e[s]=n(t[s]);return e}function a(t,e){var o=new Date(t),n=o.getFullYear(),a=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,i=o.getDate()<10?"0"+o.getDate():o.getDate();o.getHours(),o.getHours(),o.getMinutes(),o.getMinutes(),o.getSeconds(),o.getSeconds();return"".concat(n,"-").concat(a,"-").concat(i)}function i(t,e){var o=new Date(t),n=o.getFullYear(),a=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,i=o.getDate()<10?"0"+o.getDate():o.getDate(),r=o.getHours()<10?"0"+o.getHours():o.getHours(),s=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes(),c=o.getSeconds()<10?"0"+o.getSeconds():o.getSeconds();return"yyyy-MM-dd"==e?"".concat(n,"-").concat(a,"-").concat(i):"".concat(n,"-").concat(a,"-").concat(i," ").concat(r,":").concat(s,":").concat(c)}function r(t){var e=Object.prototype.toString,o={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return t instanceof Element?"element":o[e.call(t)]}},6654:function(t,e,o){"use strict";o("e5b4")},"7bca":function(t,e,o){},caa4:function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"k",(function(){return i})),o.d(e,"d",(function(){return r})),o.d(e,"g",(function(){return s})),o.d(e,"j",(function(){return c})),o.d(e,"c",(function(){return l})),o.d(e,"m",(function(){return d})),o.d(e,"f",(function(){return u})),o.d(e,"i",(function(){return h})),o.d(e,"b",(function(){return m})),o.d(e,"l",(function(){return f})),o.d(e,"e",(function(){return g})),o.d(e,"h",(function(){return p}));var n=o("b775");function a(t){return Object(n["a"])({url:"/addSchool",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/updateSchool",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/deleteManySchool",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/limitSchool",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/queryParamBySchoolId",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/addSchoolSlideshow",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/updateSchoolSlideshow",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/deleteSchoolSlideshowIds",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/limitSchoolSlideshow",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/addSchoolHonor",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/updateSchoolHonor",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/deleteSchoolHonorIds",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/limitSchoolHonor",method:"get",params:t})}},e5b4:function(t,e,o){},fb0d:function(t,e,o){"use strict";o("7bca")}}]);