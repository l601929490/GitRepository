(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f4a5905"],{"3d67":function(t,e,n){"use strict";n("bf73")},9129:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-body"},[n("div",{staticClass:"table-action"},[n("div",{staticClass:"lf"}),n("div",{staticClass:"rt"},[n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-upload2"},on:{click:t.exportStudentList}},[t._v("导出")])],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:t.pageDataList,"tooltip-effect":"dark",height:t.tableHeight},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),n("el-table-column",{attrs:{label:"微信头像",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:t.parseJson(e.row.rawData).avatarUrl,fit:"scale-down","preview-src-list":t.avatarUrlAll}})],1)]}}])}),n("el-table-column",{attrs:{label:"微信昵称",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(t.parseJson(e.row.rawData).nickName))])]}}])}),n("el-table-column",{attrs:{label:"电话",prop:"userPhone",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!=e.row.userPhone?n("div",[t._v(" "+t._s(e.row.userPhone)+" ")]):n("div",[t._v("/")])]}}])}),n("el-table-column",{attrs:{label:"身份",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.identitys[0]?n("el-tag",{attrs:{type:1===e.row.identitys[0]?"primary":"warning","disable-transitions":""}},[t._v("学生")]):t._e(),2==e.row.identitys[0]?n("el-tag",{attrs:{type:2===e.row.identitys[0]?"success":"primary","disable-transitions":""}},[t._v("老师")]):t._e(),3==e.row.identitys[0]?n("el-tag",{attrs:{type:3===e.row.identitys[0]?"danger":"info","disable-transitions":""}},[t._v("监护人")]):t._e(),4==e.row.identitys[0]||null==e.row.identitys?n("el-tag",{attrs:{type:(e.row.identitys[0],"info"),"disable-transitions":""}},[t._v("潜在客户")]):t._e()]}}])}),n("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.identitys[0]&&e.row.student[0]&&1==e.row.student[0].state?n("div",[t._v(" 待分班 ")]):1==e.row.identitys[0]&&e.row.student[0]&&2==e.row.student[0].state?n("div",[t._v(" 已分班 ")]):1==e.row.identitys[0]&&e.row.student[0]&&3==e.row.student[0].state?n("div",[t._v(" 已结业 ")]):2==e.row.identitys[0]&&e.row.teacher&&1==e.row.teacher.state?n("div",[t._v(" 在职 ")]):2==e.row.identitys[0]&&e.row.teacher&&0==e.row.teacher.state?n("div",[t._v(" 离职 ")]):n("div",[t._v("/")])]}}])}),n("el-table-column",{attrs:{label:"学生信息",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.identitys[0]||3==e.row.identitys[0]?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.prevStudentInfo(e)}}},[t._v("查看详情")]):n("div",[t._v("/")])]}}])}),n("el-table-column",{attrs:{label:"最后一次登录时间",sortable:"",prop:"loginTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.loginTime?n("div",[t._v("/")]):n("div",[t._v(t._s(e.row.loginTime))])]}}])}),n("el-table-column",{attrs:{label:"最后一次访问时间",sortable:"",prop:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.lastLoginTime?n("div",[t._v("/")]):n("div",[t._v(t._s(e.row.lastLoginTime))])]}}])})],1),n("div",{staticClass:"table-page__action"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pageCount,"page-size":15},on:{"current-change":t.changePage}})],1),n("el-dialog",{attrs:{title:"学生信息",width:"700px","close-on-click-modal":!1,visible:t.studentInfoShow},on:{"update:visible":function(e){t.studentInfoShow=e}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:t.studentsList,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{label:"编号",type:"index",width:"100px"}}),n("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),n("el-table-column",{attrs:{label:"学生电话",prop:"studentPhone"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.studentPhone?n("div",[t._v("/")]):n("div",[t._v(t._s(e.row.studentPhone))])]}}])}),n("el-table-column",{attrs:{label:"学生年龄",prop:"studentAge"}})],1)],1)],1)},i=[],o=(n("d3b7"),n("5530")),l=n("f6b0"),r={data:function(){return{tableHeight:window.innerHeight-210,tableData:[],avatarUrlAll:[],multipleSelection:[],valLength:"",searchInfo:"",pageCount:null,pageDataList:[],companyId:"",loading:!1,studentInfoShow:!1,studentsList:[]}},methods:{parseJson:function(t){try{return JSON.parse(t)}catch(e){return{}}},getChangePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(l["b"])(Object(o["a"])(Object(o["a"])({},e),{},{companyId:this.companyId,schoolId:this.schoolId})).then((function(e){var n=e.data;t.pageCount=e.pageCount,t.pageDataList=e.data;for(var a=[],i=0;i<n.length;i++){var o=JSON.parse(n[i].rawData).avatarUrl;a.push(o)}t.avatarUrlAll=a})).finally((function(){t.loading=!1}))},changePage:function(t){this.getChangePage({page:t,limit:15})},exportStudentList:function(){window.location.href="https://edu.siwonet.com/exportExcul"},handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},prevStudentInfo:function(t){this.studentsList=[],this.studentInfoShow=!0;var e=[];e=3==t.row.identitys[0]?t.row.guardian.students:1==t.row.identitys[0]?t.row.student:[],this.studentsList=e}},mounted:function(){var t=sessionStorage.getItem("companyId",t);this.companyId=t;var e=sessionStorage.getItem("schoolId",e);this.schoolId=e,this.getChangePage({page:1,limit:15})}},s=r,d=(n("3d67"),n("2877")),u=Object(d["a"])(s,a,i,!1,null,"931ad6c0",null);e["default"]=u.exports},bf73:function(t,e,n){},f6b0:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return d}));var a=n("b775");function i(t){return Object(a["a"])({url:"/limitClients",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/limitClientsAccomplish",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/getAllClass",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/limitClientsFail",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/updateSuggestStatus",method:"get",params:t})}function d(t){return Object(a["a"])({url:"/limitSuggest",method:"get",params:t})}}}]);