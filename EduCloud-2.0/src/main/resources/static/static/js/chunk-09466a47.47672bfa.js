(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09466a47"],{"05dc":function(t,e,o){"use strict";o("b290")},"23d7":function(t,e,o){"use strict";o.d(e,"c",(function(){return a})),o.d(e,"o",(function(){return r})),o.d(e,"q",(function(){return i})),o.d(e,"h",(function(){return d})),o.d(e,"j",(function(){return l})),o.d(e,"d",(function(){return s})),o.d(e,"n",(function(){return c})),o.d(e,"k",(function(){return u})),o.d(e,"l",(function(){return m})),o.d(e,"m",(function(){return h})),o.d(e,"f",(function(){return p})),o.d(e,"b",(function(){return f})),o.d(e,"e",(function(){return g})),o.d(e,"p",(function(){return y})),o.d(e,"i",(function(){return b})),o.d(e,"g",(function(){return k})),o.d(e,"a",(function(){return w}));var n=o("b775");function a(t){return Object(n["a"])({url:"/addScoreGoods",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/queryScoreDisable",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/updateScoreDisable",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/queryGoodsBySchoolId",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/queryGoodsTypeBySchoolId",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/deleteGoodsByGoodsId",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/applet/querySchoolByCompanyId",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/queryOrderByOrderNum",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/queryOrderBySchoolId",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/queryOrderYwcAndDshNum",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/getOrderNum",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/addGoodsType",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/deleteGoodsType",method:"get",params:t})}function y(t){return Object(n["a"])({url:"/queryScoreSumBySchoolId",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/queryGoodsDetailByStudentId",method:"get",params:t})}function k(t){return Object(n["a"])({url:"/queryDynamicConditionBySchoolId",method:"get",params:t})}function w(t){return Object(n["a"])({url:"/addDynamicCondition",method:"post",data:t})}},b290:function(t,e,o){},befe:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content-body"},[o("div",{staticClass:"table-action"},[o("div",{staticClass:"lf"}),o("div",{staticClass:"rt"},[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addclick}},[t._v("新增")]),o("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(t.valLength,t.multipleSelection)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.handDelete(t.valLength,t.multipleSelection)}}},[t._v("删除")])],1)]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:t.typeArr,"tooltip-effect":"dark",height:t.tableHeight},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),o("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),o("el-table-column",{attrs:{label:"商品类别",sortable:"",prop:"typeName",width:"120"}}),o("el-table-column",{attrs:{label:"校区",prop:"schoolName",width:"120"}})],1),o("el-dialog",{attrs:{title:t.dialogTitle,width:"600px","close-on-click-modal":!1,visible:t.isaddmaskshow},on:{"update:visible":function(e){t.isaddmaskshow=e}}},[o("el-form",{ref:"addForm",attrs:{"label-width":"80px",model:t.addForm,rules:t.rules}},[o("el-form-item",{attrs:{label:"类型名",prop:"applyTitle"}},[o("el-input",{model:{value:t.addForm.typeName,callback:function(e){t.$set(t.addForm,"typeName",e)},expression:"addForm.typeName"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"noadd",on:{click:t.noaddclick}},[t._v("取消")]),o("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:t.okaddclick}},[t._v("确认")])],1)],1)],1)},a=[],r=(o("a15b"),o("d3b7"),o("9dac")),i=o("23d7"),d=(o("4260"),{components:{upload:r["a"]},data:function(){return{tableHeight:window.innerHeight-200,tableData:[],isaddmaskshow:!1,iseditmaskshow:!1,isdisplaymaskshow:!1,isSureDelete:!1,editContent:"",valLength:"",searchInfo:"",timeout:null,pageCount:null,pageDataList:[],schoolId:"",bindForm:"",teacherIds:"",loading:!1,adminName:"",dialogTitle:"",tipcontent:"",multipleSelection:[],addForm:{typeName:""},rules:{typeName:[{required:!0,message:"请填写类别名",trigger:"blur"}]},typeArr:[],storageArr:{companyId:"",schoolId:""},typeId:"",deletetypeId:""}},mounted:function(){this.getStorage(),this.getType()},methods:{handleRowClick:function(t,e,o){this.$refs.multipleTable.toggleRowSelection(t)},getType:function(){var t=this;Object(i["j"])({schoolId:this.storageArr.schoolId}).then((function(e){t.typeArr=e.data}))},getStorage:function(){this.storageArr.companyId=window.sessionStorage.getItem("companyId"),this.storageArr.schoolId=window.sessionStorage.getItem("schoolId")},handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},addclick:function(){this.addForm.typeName="",this.typeId="",this.dialogTitle="新增类别",this.isaddmaskshow=!0},okaddclick:function(){var t=this;this.$refs["addForm"].validate((function(e){if(!e)return t.$message.error("请填写完整的信息"),!1;Object(i["b"])({typeId:t.typeId,typeName:t.addForm.typeName,schoolId:t.storageArr.schoolId}).then((function(e){0==e.code&&(t.getType(),t.$message.success(e.msg)),t.isaddmaskshow=!1}))}))},noaddclick:function(){this.isaddmaskshow=!1},handleEdit:function(){this.dialogTitle="编辑类别";var t=this.multipleSelection.length;""==t?this.$message.error("您还未选择要编辑的类别"):1==t?(this.typeId=this.multipleSelection[0].typeId,this.addForm.typeName=this.multipleSelection[0].typeName,this.isaddmaskshow=!0):t>1&&this.$message.error("您只能选择一个要编辑的类别")},handDelete:function(t,e){var o=this;if(t){for(var n=[],a=0;a<e.length;a++){var r=e[a].typeId;n.push(r)}this.$confirm("该类别下的商品都会被删除,确认要删除吗？").then((function(){o.loading=!0,Object(i["e"])({typeId:n.join(",")}).then((function(t){1==t.code||1==t.code?o.$message.error(t.msg):(o.$message.success(t.msg),o.getType())})).finally((function(){o.loading=!1}))}))}else this.$message.error("您还未选择要删除的内容")}}}),l=d,s=(o("05dc"),o("2877")),c=Object(s["a"])(l,n,a,!1,null,"28c1e05e",null);e["default"]=c.exports}}]);