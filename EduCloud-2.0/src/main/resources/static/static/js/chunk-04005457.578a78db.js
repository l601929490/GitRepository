(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04005457"],{"152a":function(t,e,n){},4124:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"r",(function(){return i})),n.d(e,"h",(function(){return r})),n.d(e,"m",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"t",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"o",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"p",(function(){return h})),n.d(e,"f",(function(){return f})),n.d(e,"k",(function(){return g})),n.d(e,"d",(function(){return p})),n.d(e,"s",(function(){return b})),n.d(e,"i",(function(){return v})),n.d(e,"n",(function(){return w})),n.d(e,"b",(function(){return k})),n.d(e,"q",(function(){return C})),n.d(e,"g",(function(){return I})),n.d(e,"l",(function(){return j}));var a=n("b775");function o(t){return Object(a["a"])({url:"/addColorImg",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/updateColorImg",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/deleteColorImg",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/limitColorImg",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/addPoster",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/updatePoster",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/deletePoster",method:"get",params:t})}function d(t){return Object(a["a"])({url:"/limitPosters",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/addActivity",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/updateActivity",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/deleteActivity",method:"get",params:t})}function g(t){return Object(a["a"])({url:"/limitActivitie",method:"get",params:t})}function p(t){return Object(a["a"])({url:"/addConsult",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/updateConsult",method:"post",data:t})}function v(t){return Object(a["a"])({url:"/deleteConsult",method:"get",params:t})}function w(t){return Object(a["a"])({url:"/limitConsults",method:"get",params:t})}function k(t){return Object(a["a"])({url:"/addBulletinBoard",method:"post",data:t})}function C(t){return Object(a["a"])({url:"/updateBulletinBoard",method:"post",data:t})}function I(t){return Object(a["a"])({url:"/deleteBulletinBoard",method:"get",params:t})}function j(t){return Object(a["a"])({url:"/limitBulletinBoard",method:"get",params:t})}},"44c2":function(t,e,n){"use strict";n("92fd")},"4b88":function(t,e,n){"use strict";n("152a")},"4dfb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-body"},[n("div",{staticClass:"table-action"},[n("div",{staticClass:"lf"},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键字进行查询",size:"small"},on:{input:t.goSearch},model:{value:t.searchInfo,callback:function(e){t.searchInfo=e},expression:"searchInfo"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchMessageInfo},slot:"append"})],1)],1),n("div",{staticClass:"rt"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addclick}},[t._v("新增")]),n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(t.valLength,t.multipleSelection)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteClick(t.valLength,t.multipleSelection)}}},[t._v("删除")])],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:t.pageDataList,"tooltip-effect":"dark",height:t.tableHeight,"empty-text":t.emptyText,"element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)"},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),n("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),n("el-table-column",{attrs:{label:"图片",prop:"subheadImg",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("el-image",{staticStyle:{width:"50px",height:"30px"},attrs:{src:e.row.subheadImg,fit:"scale-down","preview-src-list":t.subheadImgAll}})],1)]}}])}),n("el-table-column",{attrs:{label:"主标题",prop:"consultTitle",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.consultTitle.length>10?n("div",[t._v(" "+t._s(e.row.consultTitle.substring(0,10))+"... ")]):n("div",[t._v(t._s(e.row.consultTitle))])]}}])}),n("el-table-column",{attrs:{label:"副标题",prop:"consultSubhead",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.consultSubhead?n("div",[e.row.consultSubhead.length>10?n("div",[t._v(" "+t._s(e.row.consultSubhead.substring(0,10))+"... ")]):n("div",[t._v(" "+t._s(e.row.consultSubhead)+" ")])]):n("div",{staticClass:"nodata"},[t._v("暂无数据")])]}}])}),n("el-table-column",{attrs:{label:"资讯内容",prop:"subheadText",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.subheadText.length>10?n("div",[t._v(" "+t._s(t._f("toRemoveCharacter")(e.row.subheadText.substring(0,10)))+"... ")]):n("div",[t._v(t._s(t._f("toRemoveCharacter")(e.row.subheadText)))])]}}])}),n("el-table-column",{attrs:{label:"阅读量",sortable:"",prop:"readConsult",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(e.row.readConsult)+"次")])]}}])}),n("el-table-column",{attrs:{label:"创建人",sortable:"",prop:"creator",width:"120"}}),n("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"creationTime",width:"200"}}),n("el-table-column",{attrs:{label:"编辑人",sortable:"",prop:"editor",width:"120"}}),n("el-table-column",{attrs:{label:"最后一次编辑的时间",sortable:"",prop:"editSession",width:"200"}})],1),n("div",{staticClass:"table-page__action"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pageCount,"page-size":10},on:{"current-change":t.changePage}})],1),n("el-dialog",{attrs:{title:"新增资讯信息",width:"800px","close-on-click-modal":!1,visible:t.isaddmaskshow},on:{"update:visible":function(e){t.isaddmaskshow=e}}},[t.isaddmaskshow?n("TheForm",{ref:"newForm"}):t._e(),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"noadd",on:{click:t.noaddclick}},[t._v("取消")]),n("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:t.okaddclick}},[t._v("确认")])],1)],1),n("el-dialog",{attrs:{title:"编辑资讯信息",width:"800px","close-on-click-modal":!1,visible:t.iseditmaskshow},on:{"update:visible":function(e){t.iseditmaskshow=e}}},[t.iseditmaskshow?n("TheForm",{ref:"editForm",attrs:{type:"edit"}}):t._e(),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"noedit",on:{click:t.noEditclick}},[t._v("取消")]),n("el-button",{staticClass:"okedit",attrs:{type:"primary"},on:{click:t.okEditclick}},[t._v("确认")])],1)],1)],1)},o=[],i=(n("a15b"),n("d3b7"),n("ac1f"),n("5319"),n("5530")),r=(n("96cf"),n("1da1")),s=n("4124"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.form?n("el-form",{ref:"form",attrs:{"label-width":"80px",model:t.form,rules:t.rules}},[n("el-form-item",{ref:"uploadForm",staticClass:"upload-img-form",attrs:{prop:"subheadImg",label:"主图"}},[n("upload",{attrs:{params:{companyId:t.companyId}},model:{value:t.form.subheadImg,callback:function(e){t.$set(t.form,"subheadImg",e)},expression:"form.subheadImg"}}),n("div",{},[t._v("(建议上传文件大小不超过200KB，图片宽:高——4:3)")])],1),n("el-form-item",{attrs:{label:"主标题",prop:"consultTitle"}},[n("el-input",{attrs:{placeholder:"请输入主标题"},model:{value:t.form.consultTitle,callback:function(e){t.$set(t.form,"consultTitle",e)},expression:"form.consultTitle"}})],1),n("el-form-item",{attrs:{label:"副标题",prop:"consultSubhead"}},[n("el-input",{attrs:{placeholder:"请输入副标题"},model:{value:t.form.consultSubhead,callback:function(e){t.$set(t.form,"consultSubhead",e)},expression:"form.consultSubhead"}})],1),n("el-form-item",{attrs:{label:"资讯内容",prop:"subheadText"}},[n("editor",{model:{value:t.form.subheadText,callback:function(e){t.$set(t.form,"subheadText",e)},expression:"form.subheadText"}})],1)],1):t._e()},c=[],u=n("9dac"),d=n("ceb0"),m=n("4260"),h={props:{type:{type:String,default:"new"}},components:{upload:u["a"],Editor:d["a"]},name:"",data:function(){return{rules:{subheadImg:[{required:!0,message:"请上传图片",trigger:"blur"}],consultTitle:[{required:!0,message:"请输入主标题",trigger:"blur"}],subheadText:[{required:!0,message:"请输入资讯内容",trigger:"blur"}]},form:{subheadImg:"",consultTitle:"",consultSubhead:"",subheadText:"",readConsult:0},defaultForm:{},companyId:""}},watch:{},created:function(){this.init();var t=sessionStorage.getItem("companyId",t);this.companyId=t},mounted:function(){},methods:{isPass:function(){var t=this;return new Promise((function(e){var n=t.$refs.form;n.validate((function(t){e(t)}))}))},init:function(){this.defaultForm=Object(m["a"])(this.form)},getValue:function(){var t=Object(m["a"])(this.form);return t},setValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.form=Object(m["a"])(t)},reset:function(){this.form=Object(m["a"])(this.defaultForm),this.$refs.form.resetFields()}},computed:{},filters:{}},f=h,g=n("2877"),p=Object(g["a"])(f,l,c,!1,null,"78c7f5c0",null),b=p.exports,v={components:{TheForm:b},data:function(){return{tableHeight:window.innerHeight-210,tableData:[],editContent:"",isaddmaskshow:!1,iseditmaskshow:!1,filePath:"",multipleSelection:[],valLength:"",selectUploadFileBtn:!0,pageCount:null,pageDataList:[],searchInfo:"",subheadImgAll:[],emptyText:"暂无数据",imageurl:"",schoolId:"",adminName:"",loading:!1}},filters:{toRemoveCharacter:function(t){return(t+"").replace(/<p>|<\/p>|<p>|<br>|<br\/>|<strong>|<\/strong>/g,"")}},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},handleRowClick:function(t,e,n){this.$refs.multipleTable.toggleRowSelection(t)},addConsult:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.newForm.isPass();case 2:if(n=e.sent,0!=n){e.next=5;break}return e.abrupt("return");case 5:a=t.$refs.newForm.getValue(),t.loading=!0,Object(s["d"])(Object(i["a"])(Object(i["a"])({},a),{},{schoolId:t.schoolId,creator:t.adminName})).then((function(e){1==e.code?t.$message.error(e.msg):(t.isaddmaskshow=!1,t.$message.success(e.msg),t.getChangePage({page:1,limit:10}))})).finally((function(){t.loading=!1}));case 8:case"end":return e.stop()}}),e)})))()},addclick:function(){var t=this;this.isaddmaskshow=!0,this.$nextTick((function(){t.$refs.newForm.reset()}))},noaddclick:function(){this.isaddmaskshow=!1},okaddclick:function(){this.addConsult()},EditInfo:function(){var t=this;this.loading=!0;var e=this.$refs.editForm.getValue();Object(s["s"])(Object(i["a"])(Object(i["a"])({},e),{},{schoolId:this.schoolId,editor:this.adminName})).then((function(e){t.iseditmaskshow=!1,1==e.code?t.$message.error(e.msg):(t.$message.success(e.msg),t.getChangePage({page:1,limit:10}))})).finally((function(){t.loading=!1}))},handleEdit:function(t,e){var n=this;if(t){if(1==t)this.editContent=Object(m["a"])(e[0]),this.iseditmaskshow=!0,this.$nextTick((function(){n.$refs.editForm.reset(),n.$refs.editForm.setValue(n.editContent)}));else if(t>1)return void this.$message.error("您只能选择一个要编辑的内容")}else this.$message.error("您还未选择要编辑的内容")},okEditclick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.editForm.isPass();case 2:if(n=e.sent,0!=n){e.next=5;break}return e.abrupt("return");case 5:t.iseditmaskshow=!1,t.EditInfo();case 7:case"end":return e.stop()}}),e)})))()},noEditclick:function(){this.iseditmaskshow=!1},deleteClick:function(t,e){var n=this;if(t){for(var a=[],o=0;o<e.length;o++){var i=e[o].consultId;a.push(i)}this.$confirm("确认要删除吗？").then((function(){n.loading=!0,Object(s["i"])({consultIds:a.join(",")}).then((function(t){1==t.code?n.$message.error(t.msg):(n.$message.success(t.msg),n.getChangePage({page:1,limit:10}))})).finally((function(){n.loading=!1}))}))}else this.$message.error("您还未选择要删除的内容")},getChangePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(s["n"])(Object(i["a"])(Object(i["a"])({},e),{},{schoolId:this.schoolId})).then((function(e){t.pageCount=e.pageCount,t.pageDataList=e.data;for(var n=e.data,a=[],o=0;o<n.length;o++){var i=n[o].subheadImg;a.push(i)}t.subheadImgAll=a})).finally((function(){t.loading=!1}))},changePage:function(t){this.getChangePage({page:t,limit:10})},goSearch:function(){var t=this;this.searchInfo;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.getChangePage({consultTitle:t.searchInfo,page:1,limit:20})}),300)},searchMessageInfo:function(){this.getChangePage({consultTitle:this.searchInfo,page:1,limit:20})},getImageurl:function(t){this.imageurl=t}},mounted:function(){var t=sessionStorage.getItem("schoolId",t);this.schoolId=t;var e=sessionStorage.getItem("adminName",e);this.adminName=e,this.getChangePage({page:1,limit:10})}},w=v,k=(n("4b88"),n("44c2"),Object(g["a"])(w,a,o,!1,null,"feaa48da",null));e["default"]=k.exports},"92fd":function(t,e,n){}}]);