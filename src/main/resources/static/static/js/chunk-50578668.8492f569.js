(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50578668"],{"1b3d":function(t,e,a){},4260:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return l}));a("99af"),a("d3b7"),a("25f0");function n(t){var e,a=o(t);if("array"===a)e=[];else{if("object"!==a)return t;e={}}if("array"===a)for(var s=0,l=t.length;s<l;s++)e.push(n(t[s]));else if("object"===a)for(var i in t)e[i]=n(t[i]);return e}function s(t,e){var a=new Date(t),n=a.getFullYear(),s=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,l=a.getDate()<10?"0"+a.getDate():a.getDate();a.getHours(),a.getHours(),a.getMinutes(),a.getMinutes(),a.getSeconds(),a.getSeconds();return"".concat(n,"-").concat(s,"-").concat(l)}function l(t,e){var a=new Date(t),n=a.getFullYear(),s=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,l=a.getDate()<10?"0"+a.getDate():a.getDate(),o=a.getHours()<10?"0"+a.getHours():a.getHours(),i=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),r=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds();return"yyyy-MM-dd"==e?"".concat(n,"-").concat(s,"-").concat(l):"".concat(n,"-").concat(s,"-").concat(l," ").concat(o,":").concat(i,":").concat(r)}function o(t){var e=Object.prototype.toString,a={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return t instanceof Element?"element":a[e.call(t)]}},"4b4a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"table-action"},[a("div",{staticClass:"lf"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-select",{staticClass:"search-select",attrs:{size:"small",placeholder:"请选择班级名称","popper-append-to-body":!1},on:{change:t.selectClass},model:{value:t.classId,callback:function(e){t.classId=e},expression:"classId"}},[a("el-option",{attrs:{label:"全部",value:""}},[t._v("全部")]),t._l(t.classData,(function(t){return a("el-option",{key:t.className,attrs:{value:t.classId,label:t.className}})}))],2)],1)],1)],1),a("div",{staticClass:"rt"},[a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteClick(t.valLength,t.multipleSelection)}}},[t._v("删除")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:t.pageDataList,"tooltip-effect":"dark",height:t.tableHeight,"row-key":t.getRowKeys,"expand-row-keys":t.expands},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange,"expand-change":t.exChange}},[a("el-table-column",{attrs:{type:"selection",width:"100",fixed:""}}),a("el-table-column",{attrs:{label:"编号",type:"index",width:"100"}}),a("el-table-column",{attrs:{label:"发布人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.teacher.teacherName))])]}}])}),this.classId?t._e():a("el-table-column",{attrs:{label:"班级名称",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("filters_studentClassNames")(e.row)))])]}}],null,!1,2425087961)}),t.classId?a("el-table-column",{attrs:{label:"已提交人数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.okNum)+"人")])]}}],null,!1,2441517970)}):t._e(),t.classId?a("el-table-column",{attrs:{label:"未提交人数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.notNum)+"人")])]}}],null,!1,879226563)}):t._e(),a("el-table-column",{attrs:{label:"作业科目",sortable:"",prop:"taskSubject",width:"120"}}),a("el-table-column",{attrs:{label:"作业类型",prop:"longTermUse",width:"150",filters:[{text:"一次性任务",value:0},{text:"长期性任务",value:1}],"filter-method":t.filterTypeTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.longTermUse?a("el-tag",{attrs:{type:"0"===e.row.longTermUse?"danger":"success","disable-transitions":""}},[t._v("一次性任务")]):t._e(),1==e.row.longTermUse?a("el-tag",{attrs:{type:(e.row.longTermUse,"primary"),"disable-transitions":""}},[t._v("长期性任务")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"学生提交内容",prop:"visible",width:"150",filters:[{text:"学生互相可见",value:0},{text:"仅优秀作业相互可见",value:1},{text:"仅老师可见",value:2}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.visible?a("el-tag",{attrs:{type:"0"===e.row.visible?"success":"primary","disable-transitions":""}},[t._v("学生互相可见")]):t._e(),1==e.row.visible?a("el-tag",{attrs:{type:"1"===e.row.visible?"primary":"success","disable-transitions":""}},[t._v("仅优秀作业相互可见")]):t._e(),2==e.row.visible?a("el-tag",{attrs:{type:"2"===e.row.visible?"primary":"info","disable-transitions":""}},[t._v("仅老师可见")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"作业文字内容",prop:"taskText",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.taskText.length>8?a("div",[t._v(" "+t._s(e.row.taskText.substring(0,8))+"... ")]):e.row.taskText.length>0&&e.row.taskText.length<9?a("div",[t._v(" "+t._s(e.row.taskText)+" ")]):a("div",[t._v("/")])]}}])}),a("el-table-column",{attrs:{type:"expand",label:"作业详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"作业文字内容"}},[""!=e.row.taskText?a("div",[t._v(" "+t._s(e.row.taskText)+" ")]):a("div",{staticClass:"noData"},[t._v("暂无数据")])]),a("el-form-item",{attrs:{label:"作业图片内容"}},[""!=e.row.taskImg?a("div",t._l(e.row.taskImg,(function(t,n){return a("span",{key:n},[a("el-image",{staticStyle:{width:"50px",height:"50px",margin:"10px"},attrs:{src:t,fit:"scale-down","preview-src-list":e.row.taskImg}})],1)})),0):a("div",{staticClass:"noData"},[t._v("暂无数据")])]),a("el-form-item",{attrs:{label:"作业视频内容"}},[""!=e.row.taskVideo?a("div",t._l(e.row.taskVideo,(function(t,e){return a("span",{key:e},[a("video",{staticClass:"videoBox",staticStyle:{width:"100px",height:"100px",margin:"10px"},attrs:{src:t,controls:""}})])})),0):a("div",{staticClass:"noData"},[t._v("暂无数据")])]),a("el-form-item",{attrs:{label:"作业语音内容"}},[""!=e.row.recording?a("div",[a("span",[t._v(t._s(e.row.recording.length)+"条(为了更好的体验，请前往小程序查看)")])]):a("div",{staticClass:"noData"},[t._v("暂无数据")])])],1)]}}])}),a("el-table-column",{attrs:{label:"是否补交",sortable:"",prop:"allowJob",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.visible?a("div",[t._v("否")]):a("div",[t._v("是")])]}}])}),a("el-table-column",{attrs:{label:"是否定时发布",sortable:"",prop:"isTiming",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isTiming?a("div",[t._v("否")]):a("div",[t._v("是")])]}}])}),a("el-table-column",{attrs:{label:"定时发布的时间",sortable:"",prop:"timingTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!=e.row.timingTime?a("div",[t._v(" "+t._s(e.row.timingTime)+" ")]):a("div",[t._v("/")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"createTime",width:"200"}}),a("el-table-column",{attrs:{label:"提交截止时间",sortable:"",prop:"taskStopTime",width:"200"}})],1),a("div",{staticClass:"table-page__action"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pageCount,"page-size":15},on:{"current-change":t.changePage}})],1)],1)},s=[],l=(a("99af"),a("a15b"),a("d81d"),a("d3b7"),a("5530")),o=a("9dac"),i=a("b775");function r(t){return Object(i["a"])({url:"/limitTask",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/getAllClass",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/deleteManyTask",method:"get",params:t})}a("4260");var d={data:function(){return{tableHeight:window.innerHeight-210,tableData:[],multipleSelection:[],valLength:"",timeout:null,searchInfo:"",pageCount:null,pageDataList:[],classImgAll:[],schoolId:"",loading:!1,adminName:"",classId:"",classData:[],expands:[],getRowKeys:function(t){return t.taskId}}},components:{upload:o["a"]},filters:{filters_studentClassNames:function(t){var e=t.myClasses;if(e){var a=[];return a=a.concat(e.map((function(t){return t.className}))),a.join("/")}return null}},methods:{isPass:function(t){var e=this;return new Promise((function(a){var n=e.$refs[t];n.validate((function(t){a(t)}))}))},resetForm:function(t){void 0!==this.$refs[t]&&this.$refs[t].resetFields()},handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},handleRowClick:function(t,e,a){this.$refs.table.toggleRowSelection(t)},exChange:function(t,e){e.length?(this.expands=[],t&&this.expands.push(t.taskId)):this.expands=[]},getChangePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,r(Object(l["a"])(Object(l["a"])({page:1,limit:15},e),{},{schoolId:this.schoolId})).then((function(e){1==e.code?(t.pageCount=0,t.pageDataList=[]):(t.pageCount=e.pageCount,t.pageDataList=e.data)})).finally((function(){t.loading=!1}))},getChangePage1:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,r(Object(l["a"])({},e)).then((function(e){1==e.code?(t.pageCount=0,t.pageDataList=[]):(t.pageCount=e.pageCount,t.pageDataList=e.data,t.$nextTick((function(){t.$refs.table.doLayout()})))})).finally((function(){t.loading=!1}))},changePage:function(t){this.getChangePage({page:t,limit:15})},studentClassName:function(){var t=this;this.loading=!0,c({schoolId:this.schoolId}).then((function(e){t.classData=e.data,t.getChangePage({page:1,limit:15})})).finally((function(){t.loading=!1}))},selectClass:function(){this.classId?this.getChangePage1({classId:this.classId}):this.getChangePage({page:1,limit:15})},deleteClick:function(t,e){var a=this;if(t){for(var n=[],s=0;s<e.length;s++){var l=e[s].taskId;n.push(l)}this.$confirm("确认要删除当前作业吗，删除后已打卡学生信息也将被删除？").then((function(){u({taskIds:n.join(","),classId:a.classId}).then((function(t){1==t.code?a.$message.error(t.msg):a.$message.success(t.msg),a.getChangePage({page:1,limit:15})})).catch((function(t){a.$message.error("已取消")}))}))}else this.$message.error("您还未选择要删除的内容")},filterTag:function(t,e){return e.visible===t},filterTypeTag:function(t,e){return e.longTermUse===t}},mounted:function(){var t=sessionStorage.getItem("schoolId",t);this.schoolId=t;var e=sessionStorage.getItem("adminName",e);this.adminName=e,this.studentClassName()}},g=d,f=(a("d132"),a("efe6"),a("2877")),h=Object(f["a"])(g,n,s,!1,null,"34cac936",null);e["default"]=h.exports},"7ff5":function(t,e,a){},d132:function(t,e,a){"use strict";a("1b3d")},efe6:function(t,e,a){"use strict";a("7ff5")}}]);