(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bf63626"],{"05dc":function(t,e,n){"use strict";n("b290")},"23d7":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"o",(function(){return r})),n.d(e,"q",(function(){return i})),n.d(e,"h",(function(){return c})),n.d(e,"j",(function(){return d})),n.d(e,"d",(function(){return l})),n.d(e,"n",(function(){return s})),n.d(e,"k",(function(){return u})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return h})),n.d(e,"f",(function(){return g})),n.d(e,"b",(function(){return p})),n.d(e,"e",(function(){return f})),n.d(e,"p",(function(){return b})),n.d(e,"i",(function(){return y})),n.d(e,"g",(function(){return j})),n.d(e,"a",(function(){return v}));var o=n("b775");function a(t){return Object(o["a"])({url:"/addScoreGoods",method:"post",data:t})}function r(t){return Object(o["a"])({url:"/queryScoreDisable",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/updateScoreDisable",method:"get",params:t})}function c(t){return Object(o["a"])({url:"/queryGoodsBySchoolId",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/queryGoodsTypeBySchoolId",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/deleteGoodsByGoodsId",method:"get",params:t})}function s(t){return Object(o["a"])({url:"/applet/querySchoolByCompanyId",method:"get",params:t})}function u(t){return Object(o["a"])({url:"/queryOrderByOrderNum",method:"get",params:t})}function m(t){return Object(o["a"])({url:"/queryOrderBySchoolId",method:"post",data:t})}function h(t){return Object(o["a"])({url:"/queryOrderYwcAndDshNum",method:"get",params:t})}function g(t){return Object(o["a"])({url:"/getOrderNum",method:"get",params:t})}function p(t){return Object(o["a"])({url:"/addGoodsType",method:"post",data:t})}function f(t){return Object(o["a"])({url:"/deleteGoodsType",method:"get",params:t})}function b(t){return Object(o["a"])({url:"/queryScoreSumBySchoolId",method:"post",data:t})}function y(t){return Object(o["a"])({url:"/queryGoodsDetailByStudentId",method:"get",params:t})}function j(t){return Object(o["a"])({url:"/queryDynamicConditionBySchoolId",method:"get",params:t})}function v(t){return Object(o["a"])({url:"/addDynamicCondition",method:"post",data:t})}},4260:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r}));n("99af"),n("d3b7"),n("25f0");function o(t){var e,n=i(t);if("array"===n)e=[];else{if("object"!==n)return t;e={}}if("array"===n)for(var a=0,r=t.length;a<r;a++)e.push(o(t[a]));else if("object"===n)for(var c in t)e[c]=o(t[c]);return e}function a(t,e){var n=new Date(t),o=n.getFullYear(),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,r=n.getDate()<10?"0"+n.getDate():n.getDate();n.getHours(),n.getHours(),n.getMinutes(),n.getMinutes(),n.getSeconds(),n.getSeconds();return"".concat(o,"-").concat(a,"-").concat(r)}function r(t,e){var n=new Date(t),o=n.getFullYear(),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,r=n.getDate()<10?"0"+n.getDate():n.getDate(),i=n.getHours()<10?"0"+n.getHours():n.getHours(),c=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),d=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return"yyyy-MM-dd"==e?"".concat(o,"-").concat(a,"-").concat(r):"".concat(o,"-").concat(a,"-").concat(r," ").concat(i,":").concat(c,":").concat(d)}function i(t){var e=Object.prototype.toString,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return t instanceof Element?"element":n[e.call(t)]}},b290:function(t,e,n){},befe:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-body"},[n("div",{staticClass:"table-action"},[n("div",{staticClass:"lf"}),n("div",{staticClass:"rt"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addclick}},[t._v("新增")]),n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(t.valLength,t.multipleSelection)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.handDelete(t.valLength,t.multipleSelection)}}},[t._v("删除")])],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:t.typeArr,"tooltip-effect":"dark",height:t.tableHeight},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),n("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),n("el-table-column",{attrs:{label:"商品类别",sortable:"",prop:"typeName",width:"120"}}),n("el-table-column",{attrs:{label:"校区",prop:"schoolName",width:"120"}})],1),n("el-dialog",{attrs:{title:t.dialogTitle,width:"600px","close-on-click-modal":!1,visible:t.isaddmaskshow},on:{"update:visible":function(e){t.isaddmaskshow=e}}},[n("el-form",{ref:"addForm",attrs:{"label-width":"80px",model:t.addForm,rules:t.rules}},[n("el-form-item",{attrs:{label:"类型名",prop:"applyTitle"}},[n("el-input",{model:{value:t.addForm.typeName,callback:function(e){t.$set(t.addForm,"typeName",e)},expression:"addForm.typeName"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"noadd",on:{click:t.noaddclick}},[t._v("取消")]),n("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:t.okaddclick}},[t._v("确认")])],1)],1)],1)},a=[],r=(n("a15b"),n("d3b7"),n("9dac")),i=n("23d7"),c=(n("4260"),{components:{upload:r["a"]},data:function(){return{tableHeight:window.innerHeight-200,tableData:[],isaddmaskshow:!1,iseditmaskshow:!1,isdisplaymaskshow:!1,isSureDelete:!1,editContent:"",valLength:"",searchInfo:"",timeout:null,pageCount:null,pageDataList:[],schoolId:"",bindForm:"",teacherIds:"",loading:!1,adminName:"",dialogTitle:"",tipcontent:"",multipleSelection:[],addForm:{typeName:""},rules:{typeName:[{required:!0,message:"请填写类别名",trigger:"blur"}]},typeArr:[],storageArr:{companyId:"",schoolId:""},typeId:"",deletetypeId:""}},mounted:function(){this.getStorage(),this.getType()},methods:{handleRowClick:function(t,e,n){this.$refs.multipleTable.toggleRowSelection(t)},getType:function(){var t=this;Object(i["j"])({schoolId:this.storageArr.schoolId}).then((function(e){t.typeArr=e.data}))},getStorage:function(){this.storageArr.companyId=window.sessionStorage.getItem("companyId"),this.storageArr.schoolId=window.sessionStorage.getItem("schoolId")},handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length},addclick:function(){this.addForm.typeName="",this.typeId="",this.dialogTitle="新增类别",this.isaddmaskshow=!0},okaddclick:function(){var t=this;this.$refs["addForm"].validate((function(e){if(!e)return t.$message.error("请填写完整的信息"),!1;Object(i["b"])({typeId:t.typeId,typeName:t.addForm.typeName,schoolId:t.storageArr.schoolId}).then((function(e){0==e.code&&(t.getType(),t.$message.success(e.msg)),t.isaddmaskshow=!1}))}))},noaddclick:function(){this.isaddmaskshow=!1},handleEdit:function(){this.dialogTitle="编辑类别";var t=this.multipleSelection.length;""==t?this.$message.error("您还未选择要编辑的类别"):1==t?(this.typeId=this.multipleSelection[0].typeId,this.addForm.typeName=this.multipleSelection[0].typeName,this.isaddmaskshow=!0):t>1&&this.$message.error("您只能选择一个要编辑的类别")},handDelete:function(t,e){var n=this;if(t){for(var o=[],a=0;a<e.length;a++){var r=e[a].typeId;o.push(r)}this.$confirm("该类别下的商品都会被删除,确认要删除吗？").then((function(){n.loading=!0,Object(i["e"])({typeId:o.join(",")}).then((function(t){1==t.code||1==t.code?n.$message.error(t.msg):(n.$message.success(t.msg),n.getType())})).finally((function(){n.loading=!1}))}))}else this.$message.error("您还未选择要删除的内容")}}}),d=c,l=(n("05dc"),n("2877")),s=Object(l["a"])(d,o,a,!1,null,"28c1e05e",null);e["default"]=s.exports}}]);