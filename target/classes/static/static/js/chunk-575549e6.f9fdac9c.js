(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-575549e6"],{4124:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"n",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"j",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"p",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"m",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"o",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"k",(function(){return w}));var a=n("b775");function o(e){return Object(a["a"])({url:"/addColorImg",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/updateColorImg",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/deleteColorImg",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/limitColorImg",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/addPoster",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/updatePoster",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/deletePoster",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/limitPosters",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/addActivity",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/updateActivity",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/deleteActivity",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/limitActivitie",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/addConsult",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/updateConsult",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/deleteConsult",method:"get",params:e})}function w(e){return Object(a["a"])({url:"/limitConsults",method:"get",params:e})}},4260:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));n("99af"),n("d3b7"),n("25f0");function a(e){var t,n=r(e);if("array"===n)t=[];else{if("object"!==n)return e;t={}}if("array"===n)for(var o=0,i=e.length;o<i;o++)t.push(a(e[o]));else if("object"===n)for(var s in e)t[s]=a(e[s]);return t}function o(e,t){var n=new Date(e),a=n.getFullYear(),o=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():n.getDate();n.getHours(),n.getHours(),n.getMinutes(),n.getMinutes(),n.getSeconds(),n.getSeconds();return"".concat(a,"-").concat(o,"-").concat(i)}function i(e,t){var n=new Date(e),a=n.getFullYear(),o=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():n.getDate(),r=n.getHours()<10?"0"+n.getHours():n.getHours(),s=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),l=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return"yyyy-MM-dd"==t?"".concat(a,"-").concat(o,"-").concat(i):"".concat(a,"-").concat(o,"-").concat(i," ").concat(r,":").concat(s,":").concat(l)}function r(e){var t=Object.prototype.toString,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return e instanceof Element?"element":n[t.call(e)]}},"4fad":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-body"},[n("div",{staticClass:"table-action"},[n("div",{staticClass:"lf"}),n("div",{staticClass:"rt"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addclick}},[e._v("新增")]),n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(e.valLength,e.multipleSelection)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteClick(e.valLength,e.multipleSelection)}}},[e._v("删除")])],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:e.pageDataList,"tooltip-effect":"dark",height:e.tableHeight,"element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)"},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),n("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),n("el-table-column",{attrs:{label:"图片",prop:"home_img",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-image",{staticStyle:{width:"50px",height:"30px"},attrs:{src:t.row.home_img,fit:"scale-down","preview-src-list":e.home_imgAll}})],1)]}}])}),n("el-table-column",{attrs:{label:"主题色值",sortable:"",prop:"img_colour",width:"150"}}),n("el-table-column",{attrs:{label:"是否展示",sortable:"",prop:"whether_need",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.whether_need?n("div",[e._v("否")]):n("div",[e._v("是")])]}}])}),n("el-table-column",{attrs:{label:"创建人",sortable:"",prop:"creator",width:"100"}}),n("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"creation_time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.creation_time?n("div",[e._v(" "+e._s(e.formatDate1(t.row.creation_time))+" ")]):e._e()]}}])}),n("el-table-column",{attrs:{label:"编辑人",sortable:"",prop:"editor",width:"100"}}),n("el-table-column",{attrs:{label:"最后一次编辑的时间",sortable:"",prop:"edit_session",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit_session?n("div",[e._v(" "+e._s(e.formatDate1(t.row.edit_session))+" ")]):e._e()]}}])})],1),n("div",{staticClass:"table-page__action"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.pageCount,"page-size":15},on:{"current-change":e.changePage}})],1),n("el-dialog",{attrs:{title:"新增轮播图片",width:"600px","close-on-click-modal":!1,visible:e.isaddmaskshow},on:{"update:visible":function(t){e.isaddmaskshow=t}}},[e.isaddmaskshow?n("TheForm",{ref:"newForm"}):e._e(),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"noadd",on:{click:e.noaddclick}},[e._v("取消")]),n("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:e.okaddclick}},[e._v("确认")])],1)],1),n("el-dialog",{attrs:{title:"编辑轮播图片",width:"600px","close-on-click-modal":!1,visible:e.iseditmaskshow},on:{"update:visible":function(t){e.iseditmaskshow=t}}},[e.iseditmaskshow?n("TheForm",{ref:"editForm",attrs:{type:"edit"}}):e._e(),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"noedit",on:{click:e.noEditclick}},[e._v("取消")]),n("el-button",{staticClass:"okedit",attrs:{type:"primary"},on:{click:e.okEditclick}},[e._v("确认")])],1)],1)],1)},o=[],i=(n("a15b"),n("d3b7"),n("5530")),r=(n("96cf"),n("1da1")),s=n("4124"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.form?n("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.form,rules:e.rules}},[n("el-form-item",{ref:"uploadForm",staticClass:"upload-img-form",attrs:{prop:"home_img",label:"图片"}},[n("filUploadImg",{attrs:{params:{companyId:e.companyId}},on:{color:e.getColor},model:{value:e.form.home_img,callback:function(t){e.$set(e.form,"home_img",t)},expression:"form.home_img"}}),n("div",{},[e._v("(建议上传文件大小不超过200KB，图片宽:高——2:1)")])],1),n("el-form-item",{attrs:{label:"是否展示",prop:"whether_need"}},[n("el-radio-group",{model:{value:e.form.whether_need,callback:function(t){e.$set(e.form,"whether_need",t)},expression:"form.whether_need"}},[n("el-radio",{attrs:{label:0}},[e._v("否")]),n("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1):e._e()},c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{ref:"file",attrs:{type:"file",hidden:"",accept:e.video?"video/*":e.accept},on:{change:e.fileChange}}),"url"==e.upMode?n("div",{staticStyle:{width:"100%",display:"inline-flex"}},[n("el-input",{attrs:{value:e.value,disabled:""}}),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.btnChange}},[e._v(e._s(e.autoUpload?e.label:"选择文件"))]),!e.autoUpload&&e.loadButton?n("el-button",{attrs:{size:"small",type:"success"},on:{click:e.uploadClick}},[e._v(e._s(e.label))]):e._e()],1):"head"==e.upMode?n("div",{staticClass:"upmode-head"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"el-upload el-upload--picture-card",on:{click:e.btnChange}},[e.value?e.video?n("video",{staticClass:"upload-preview",attrs:{controls:"",src:e.value}}):n("img",{staticClass:"upload-preview",attrs:{src:e.value}}):n("i",{staticClass:"el-icon-plus"})]),!e.autoUpload&&e.loadButton?n("el-button",{attrs:{size:"small",type:"success"},on:{click:e.uploadClick}},[e._v(e._s(e.label))]):e._e()],1):"variable"==e.upMode?n("div",{staticClass:"el-upload-dragger",on:{click:e.btnChange}},[e.value?n("img",{attrs:{src:e.value}}):n("div",[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[n("em",[e._v(e._s(e.label))])])])]):e._e()])},d=[],m=(n("4160"),n("b64b"),n("159b"),{Config:{UploadSize:1e3}}),f={props:{video:Boolean,label:{type:String,default:"上传"},accept:{String:String,default:"image/jpeg,image/png,image/x-icon"},autoUpload:{type:Boolean,default:!0},loadButton:{type:Boolean,default:!0},value:String,action:{type:String,default:"https://edu.siwonet.com/fileUploadImg"},params:Object,upMode:{type:String,default:"head"}},data:function(){return{isLoading:!1}},methods:{btnChange:function(){var e=this.$refs.file;e.click()},fileChange:function(e){try{var t=this.getFile();if(null==t)return;if(!this.beforeUpload(t))return;if(this.autoUpload)this.submit(t);else{if("url"==this.upMode)return;var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){}}}catch(a){console.debug("choice file err:",a)}},beforeUpload:function(e){var t=m.Config.UploadSize;return!(e.size/1024/1024>t)||(this.$message.error("上传文件大小不能超过"+t+"M."),!1)},uploadClick:function(e){this.submit()},extendParams:function(e){var t=this;this.params&&e&&Object.keys(this.params).forEach((function(n){return e.append(n,t.params[n])}))},submit:function(e){var t=this;try{if(this.isLoading=!0,e||(e=this.getFile()),null==e)return;var n=!0;if(this.$emit("onbefore",e),!n)return;var a=this.action,o=new window.FormData;o.append("fileType","category"),o.append("file",e),this.extendParams(o);var i=new XMLHttpRequest;i.open("POST",a,!0),i.send(o),i.onload=function(){if(t.isLoading=!1,200===i.status){var e=JSON.parse(i.responseText),n=e.data;t.imageurl=e.data;var a=e.color;t.$emit("input",n),t.$emit("color",a),t.$emit("onsuccess",n),e.msg?t.$message.error(e.msg+"(注意:文件名不能为中文)"):t.$message.success("上传成功")}}}catch(r){this.isLoading=!1,console.debug("upload file err:",r),this.$message(res.msg)}},getFile:function(){var e=this.$refs.file;return 0==e.files.length?(this.$message("没有选择文件"),null):e.files[0]}}},g=f,h=(n("e71d"),n("2877")),p=Object(h["a"])(g,u,d,!1,null,null,null),b=p.exports,v=n("4260"),w={name:"",components:{filUploadImg:b},props:{type:{type:String,default:"new"}},data:function(){return{rules:{home_img:[{required:!0,message:"请上传图片",trigger:"blur"}],whether_need:[{required:!0,message:"请选择是否展示",trigger:"change"}]},companyId:"",form:{home_img:"",whether_need:0,img_colour:""},defaultForm:{}}},watch:{},created:function(){this.init();var e=sessionStorage.getItem("companyId",e);this.companyId=e},mounted:function(){},methods:{isPass:function(){var e=this;return new Promise((function(t){var n=e.$refs.form;n.validate((function(e){t(e)}))}))},init:function(){this.defaultForm=Object(v["a"])(this.form)},getValue:function(){var e=Object(v["a"])(this.form);return e},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.form=Object(v["a"])(e)},reset:function(){this.form=Object(v["a"])(this.defaultForm),this.$refs.form.resetFields()},getColor:function(e){this.form.img_colour=e}},computed:{},filters:{}},_=w,k=Object(h["a"])(_,l,c,!1,null,"4a6ac8c7",null),C=k.exports,y={components:{TheForm:C},data:function(){return{tableHeight:window.innerHeight-210,tableData:[],editContent:"",isaddmaskshow:!1,iseditmaskshow:!1,filePath:"",multipleSelection:[],valLength:"",selectUploadFileBtn:!0,pageCount:null,pageDataList:[],searchInfo:"",home_imgAll:[],schoolId:"",adminName:"",loading:!1}},methods:{formatDate1:function(){return v["c"].apply(void 0,arguments)},handleSelectionChange:function(e){this.multipleSelection=e,this.valLength=e.length},handleRowClick:function(e,t,n){this.$refs.multipleTable.toggleRowSelection(e)},addConsult:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.newForm.isPass();case 2:if(n=t.sent,0!=n){t.next=5;break}return t.abrupt("return");case 5:a=e.$refs.newForm.getValue(),e.loading=!0,Object(s["b"])(Object(i["a"])(Object(i["a"])({},a),{},{school_id:e.schoolId,creator:e.adminName})).then((function(t){1==t.code?e.$message.error(t.msg):(e.isaddmaskshow=!1,e.$message.success(t.msg),e.getChangePage({page:1,limit:15}))})).finally((function(){e.loading=!1}));case 8:case"end":return t.stop()}}),t)})))()},addclick:function(){var e=this;this.isaddmaskshow=!0,this.$nextTick((function(){e.$refs.newForm.reset()}))},noaddclick:function(){this.isaddmaskshow=!1},okaddclick:function(){this.addConsult()},EditInfo:function(){var e=this;this.loading=!0;var t=this.$refs.editForm.getValue();Object(s["n"])(Object(i["a"])(Object(i["a"])({},t),{},{school_id:this.schoolId,editor:this.adminName})).then((function(t){e.iseditmaskshow=!1,1==t.code?e.$message.error(t.msg):(e.$message.success(t.msg),e.getChangePage({page:1,limit:15}))})).finally((function(){e.loading=!1}))},handleEdit:function(e,t){var n=this;if(e){if(1==e)this.iseditmaskshow=!0,this.editContent=Object(v["a"])(t[0]),this.$nextTick((function(){n.$refs.editForm.reset(),n.$refs.editForm.setValue(n.editContent)}));else if(e>1)return void this.$message.error("您只能选择一个要编辑的内容")}else this.$message.error("您还未选择要编辑的内容")},okEditclick:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.editForm.isPass();case 2:if(n=t.sent,0!=n){t.next=5;break}return t.abrupt("return");case 5:e.iseditmaskshow=!1,e.EditInfo();case 7:case"end":return t.stop()}}),t)})))()},noEditclick:function(){this.iseditmaskshow=!1},deleteClick:function(e,t){var n=this;if(e){for(var a=[],o=0;o<t.length;o++){var i=t[o].img_color_id;a.push(i)}this.$confirm("确认要删除吗？").then((function(){n.loading=!0,Object(s["f"])({imgColorIds:a.join(",")}).then((function(e){1==e.code?n.$message.error(e.msg):(n.$message.success(e.msg),n.getChangePage({page:1,limit:15}))})).finally((function(){n.loading=!1}))}))}else this.$message.error("您还未选择要删除的内容")},getChangePage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(s["j"])(Object(i["a"])(Object(i["a"])({},t),{},{schoolId:this.schoolId})).then((function(t){var n=t.data;e.pageCount=t.pageCount,e.pageDataList=t.data;for(var a=[],o=0;o<n.length;o++){var i=n[o].home_img;a.push(i)}e.home_imgAll=a})).finally((function(){e.loading=!1}))},changePage:function(e){this.getChangePage({page:e,limit:15})},searchStudentInfo:function(){this.getChangePage({studentName:this.searchInfo})}},mounted:function(){var e=sessionStorage.getItem("schoolId",e);this.schoolId=e;var t=sessionStorage.getItem("adminName",t);this.adminName=t,this.getChangePage({page:1,limit:15})}},j=y,O=(n("e686"),n("b141"),Object(h["a"])(j,a,o,!1,null,"7ca92a6d",null));t["default"]=O.exports},"610b":function(e,t,n){},"6db7":function(e,t,n){},"9eb3":function(e,t,n){},b141:function(e,t,n){"use strict";n("9eb3")},e686:function(e,t,n){"use strict";n("6db7")},e71d:function(e,t,n){"use strict";n("610b")}}]);