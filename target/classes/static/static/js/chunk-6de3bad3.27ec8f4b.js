(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6de3bad3"],{4260:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i}));a("99af"),a("d3b7"),a("25f0");function n(e){var t,a=r(e);if("array"===a)t=[];else{if("object"!==a)return e;t={}}if("array"===a)for(var o=0,i=e.length;o<i;o++)t.push(n(e[o]));else if("object"===a)for(var s in e)t[s]=n(e[s]);return t}function o(e,t){var a=new Date(e),n=a.getFullYear(),o=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,i=a.getDate()<10?"0"+a.getDate():a.getDate();a.getHours(),a.getHours(),a.getMinutes(),a.getMinutes(),a.getSeconds(),a.getSeconds();return"".concat(n,"-").concat(o,"-").concat(i)}function i(e,t){var a=new Date(e),n=a.getFullYear(),o=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,i=a.getDate()<10?"0"+a.getDate():a.getDate(),r=a.getHours()<10?"0"+a.getHours():a.getHours(),s=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),l=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds();return"yyyy-MM-dd"==t?"".concat(n,"-").concat(o,"-").concat(i):"".concat(n,"-").concat(o,"-").concat(i," ").concat(r,":").concat(s,":").concat(l)}function r(e){var t=Object.prototype.toString,a={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return e instanceof Element?"element":a[t.call(e)]}},"429d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"table-action"},[a("div",{staticClass:"lf"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键字进行查询",size:"small"},on:{input:e.goSearch},model:{value:e.searchInfo,callback:function(t){e.searchInfo=t},expression:"searchInfo"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchcompanyInfo},slot:"append"})],1),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileDom",attrs:{type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:""},on:{change:e.changeFile}})],1),a("div",{staticClass:"rt"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addclick}},[e._v("新增")]),a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(e.valLength,e.multipleSelection)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteClick(e.valLength,e.multipleSelection)}}},[e._v("删除")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:e.pageDataList,"tooltip-effect":"dark",height:e.tableHeight},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"100",fixed:""}}),a("el-table-column",{attrs:{label:"编号",type:"index",width:"100"}}),a("el-table-column",{attrs:{label:"学科",prop:"subject",width:"120",filters:[{text:"语文",value:1},{text:"英语",value:2}],"filter-method":e.filterSubjectTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.subject?a("el-tag",{attrs:{type:"1"===t.row.subject?"success":"primary","disable-transitions":""}},[e._v("语文")]):e._e(),2==t.row.subject?a("el-tag",{attrs:{type:"2"===t.row.subject?"primary":"success","disable-transitions":""}},[e._v("英语")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"年级",prop:"grade",width:"120",filters:[{text:"一年级",value:1},{text:"二年级",value:2},{text:"三年级",value:3},{text:"四年级",value:4},{text:"五年级",value:5},{text:"六年级",value:6}],"filter-method":e.filterGradetTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.grade?a("el-tag",{attrs:{type:"1"===t.row.grade?"success":"info","disable-transitions":""}},[e._v("一年级")]):e._e(),2==t.row.grade?a("el-tag",{attrs:{type:"2"===t.row.grade?"primary":"info","disable-transitions":""}},[e._v("二年级")]):e._e(),3==t.row.grade?a("el-tag",{attrs:{type:"3"===t.row.grade?"primary":"warning","disable-transitions":""}},[e._v("三年级")]):e._e(),4==t.row.grade?a("el-tag",{attrs:{type:"4"===t.row.grade?"primary":"warning","disable-transitions":""}},[e._v("四年级")]):e._e(),5==t.row.grade?a("el-tag",{attrs:{type:"5"===t.row.grade?"primary":"danger","disable-transitions":""}},[e._v("五年级")]):e._e(),6==t.row.grade?a("el-tag",{attrs:{type:"6"===t.row.grade?"primary":"danger","disable-transitions":""}},[e._v("六年级")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"标题",prop:"title",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.title.length>8?a("div",[e._v(" "+e._s(t.row.title.substring(0,8))+"... ")]):a("div",[e._v(" "+e._s(t.row.title)+" ")])]}}])}),a("el-table-column",{attrs:{label:"范读(音频文件)",prop:"vanRead",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.vanRead?a("div",[e._v("/")]):a("div",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.prevAudioInfo(t)}}},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"跟读内容",prop:"content",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.content.length>8?a("div",[e._v(" "+e._s(t.row.content.substring(0,8))+"... ")]):a("div",[e._v(" "+e._s(t.row.content)+" ")])]}}])}),a("el-table-column",{attrs:{label:"创建人",sortable:"",prop:"creator",width:"120"}}),a("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"creationTime",width:"200"}}),a("el-table-column",{attrs:{label:"编辑人",sortable:"",prop:"editor",width:"120"}}),a("el-table-column",{attrs:{label:"最后一次编辑的时间",sortable:"",prop:"editSession",width:"200"}})],1),a("div",{staticClass:"table-page__action"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.pageCount,"page-size":10},on:{"current-change":e.changePage}})],1),a("el-dialog",{attrs:{title:"新增口语评测作业",width:"700px","close-on-click-modal":!1,visible:e.isaddmaskshow},on:{"update:visible":function(t){e.isaddmaskshow=t}}},[e.isaddmaskshow?a("TheForm",{ref:"newForm"}):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"noadd",on:{click:e.noaddclick}},[e._v("取消")]),a("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:e.okaddclick}},[e._v("确认")])],1)],1),a("el-dialog",{attrs:{title:"编辑口语评测作业",width:"700px","close-on-click-modal":!1,visible:e.iseditmaskshow},on:{"update:visible":function(t){e.iseditmaskshow=t}}},[e.iseditmaskshow?a("TheForm",{ref:"editForm",attrs:{type:"edit"}}):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"noedit",on:{click:e.noeditclick}},[e._v("取消")]),a("el-button",{staticClass:"okedit",attrs:{type:"primary"},on:{click:e.okeditclick}},[e._v("确认")])],1)],1),a("el-dialog",{attrs:{title:"范读(音频文件)",width:"800px","close-on-click-modal":!1,visible:e.isAudioShow},on:{"update:visible":function(t){e.isAudioShow=t}}},[a("el-table",{ref:"multipleTable",attrs:{border:"",stripe:"",data:e.audioPath}},[a("el-table-column",{attrs:{label:"音频链接",prop:"vanRead"}})],1)],1)],1)},o=[],i=(a("a15b"),a("d3b7"),a("5530")),r=(a("96cf"),a("1da1")),s=a("9dac"),l=a("b775");function c(e){return Object(l["a"])({url:"/addTeachingMaterial",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/updateTeachingMaterial",method:"post",data:e})}function u(e){return Object(l["a"])({url:"/deleteManyTeachingMaterial",method:"get",params:e})}function g(e){return Object(l["a"])({url:"/limitTeachingMaterials",method:"get",params:e})}function m(e){return Object(l["a"])({url:"/importExcul",method:"post",data:e})}var f=a("4260"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"范读录音",prop:"vanRead"}},[a("upload",{attrs:{audio:"",params:{companyId:e.companyId}},model:{value:e.form.vanRead,callback:function(t){e.$set(e.form,"vanRead",t)},expression:"form.vanRead"}})],1),a("el-form-item",{attrs:{label:"学科",prop:"subject"}},[a("el-select",{attrs:{placeholder:"请选择学科"},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}},e._l(e.subjectList,(function(e){return a("el-option",{key:e.subjectName,attrs:{value:e.subjectId,label:e.subjectName}})})),1)],1),a("el-form-item",{attrs:{label:"年级",prop:"grade"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},e._l(e.gradeList,(function(e){return a("el-option",{key:e.gradeName,attrs:{value:e.gradeId,label:e.gradeName}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"跟读内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输跟读入内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)},p=[],b=(a("bc3a"),{components:{upload:s["a"]},props:{type:{type:String,default:"new"}},data:function(){return{rules:{subject:[{required:!0,message:"请选择学科",trigger:"blur"}],grade:[{required:!0,message:"请选择年级",trigger:"blur"}],title:[{required:!0,message:"标题不能为空",trigger:"change"}],content:[{required:!0,message:"内容不能为空",trigger:"change"}]},gradeList:[{gradeId:1,gradeName:"一年级"},{gradeId:2,gradeName:"二年级"},{gradeId:3,gradeName:"三年级"},{gradeId:4,gradeName:"四年级"},{gradeId:5,gradeName:"五年级"},{gradeId:6,gradeName:"六年级"}],subjectList:[{subjectId:1,subjectName:"语文"},{subjectId:2,subjectName:"英语"}],gradeId:null,form:{subject:1,grade:1,title:"",content:"",vanRead:""},defaultForm:{},companyId:""}},mounted:function(){this.init()},methods:{isPass:function(){var e=this;return new Promise((function(t){var a=e.$refs.form;a.validate((function(e){t(e)}))}))},init:function(){this.defaultForm=Object(f["a"])(this.form);var e=sessionStorage.getItem("companyId",e);this.companyId=e},getValue:function(){var e=Object(f["a"])(this.form);return e},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.form=Object(f["a"])(e)},reset:function(){this.form=Object(f["a"])(this.defaultForm),this.$refs.form.resetFields()}}}),v=b,w=(a("55d7"),a("2877")),k=Object(w["a"])(v,h,p,!1,null,null,null),y=k.exports,j={data:function(){return{tableHeight:window.innerHeight-210,tableData:[],isaddmaskshow:!1,iseditmaskshow:!1,editContent:"",multipleSelection:[],valLength:"",searchInfo:"",page:1,pageCount:null,pageDataList:[],adminName:"",schoolId:"",loading:!1,adminId:"",isAudioShow:!1,audioPath:[]}},components:{upload:s["a"],TheForm:y},methods:{addAcount:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.newForm.isPass();case 2:if(a=t.sent,0!=a){t.next=5;break}return t.abrupt("return");case 5:e.loading=!0,n=e.$refs.newForm.getValue(),c(Object(i["a"])(Object(i["a"])({},n),{},{creator:e.adminName,schoolId:e.schoolId})).then((function(t){1==t.code?e.$message.error(t.msg):(e.isaddmaskshow=!1,e.$message.success(t.msg),e.getChangePage({page:e.page,limit:10}))})).finally((function(){e.loading=!1}));case 8:case"end":return t.stop()}}),t)})))()},addclick:function(){var e=this;this.isaddmaskshow=!0,this.$nextTick((function(){e.$refs.newForm.reset()}))},noaddclick:function(){this.isaddmaskshow=!1},okaddclick:function(){this.addAcount()},handleEdit:function(e,t){var a=this;this.editContent=Object(f["a"])(t[0]),e?1==e?(this.iseditmaskshow=!0,this.$nextTick((function(){a.$refs.editForm.reset(),a.$refs.editForm.setValue(a.editContent)}))):e>1&&this.$message.error("您只能选择一个要编辑的口语作业"):this.$message.error("您还未选择要编辑的口语作业")},EditAcount:function(){var e=this;this.loading=!0;var t=this.$refs.editForm.getValue();d(Object(i["a"])(Object(i["a"])({},t),{},{editor:this.adminName})).then((function(t){1==t.code?e.$message.error(t.msg):(e.iseditmaskshow=!1,e.$message.success(t.msg),e.getChangePage({page:e.page,limit:10}))})).finally((function(){e.loading=!1}))},okeditclick:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.editForm.isPass();case 2:if(a=t.sent,0!=a){t.next=5;break}return t.abrupt("return");case 5:e.EditAcount();case 6:case"end":return t.stop()}}),t)})))()},noeditclick:function(){this.iseditmaskshow=!1},handleSelectionChange:function(e){this.multipleSelection=e,this.valLength=e.length},handleRowClick:function(e,t,a){this.$refs.multipleTable.toggleRowSelection(e)},deleteClick:function(e,t){var a=this;if(e){for(var n=[],o=0;o<t.length;o++){var i=t[o].teachingMaterialId;n.push(i)}this.$confirm("确认要删除吗？").then((function(){u({materialIds:n.join(",")}).then((function(e){1==e.code?a.$message.error(e.msg):a.$message.success(e.msg),a.getChangePage({page:a.page,limit:10})}))}))}else this.$message.error("您还未选择要删除的口语作业")},getChangePage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,g(Object(i["a"])(Object(i["a"])({},t),{},{schoolId:this.schoolId})).then((function(t){e.pageCount=t.pageCount,e.pageDataList=t.data})).finally((function(){e.loading=!1}))},changePage:function(e){this.page=e,this.getChangePage({page:e,limit:10})},selectFile:function(){var e=this.$refs.fileDom;e.click()},changeFile:function(e){var t=this,a=e.target.files[0],n=new FormData;n.append("file",a),m(n).then((function(e){1==e.code?t.$message.error(e.msg):(t.$message.success(e.msg),t.getChangePage({page:t.page,limit:10}))}))},exportStudentList:function(){window.location.href="https://edu.siwonet.com/exportExcul"},goSearch:function(){var e=this;this.searchInfo;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.getChangePage({companyName:e.searchInfo,page:1,limit:20})}),300)},searchcompanyInfo:function(){this.getChangePage({companyName:this.searchInfo,page:1,limit:20})},filterSubjectTag:function(e,t){return t.subject===e},filterGradetTag:function(e,t){return t.grade===e},prevAudioInfo:function(e){this.audioPath=[],this.isAudioShow=!0,this.audioPath.push(e.row)}},mounted:function(){var e=sessionStorage.getItem("adminName",e);this.adminName=e;var t=sessionStorage.getItem("schoolId",t);this.schoolId=t,this.getChangePage({page:1,limit:10})}},_=j,x=(a("5f02"),Object(w["a"])(_,n,o,!1,null,"0ae79142",null));t["default"]=x.exports},"55d7":function(e,t,a){"use strict";a("a8ca")},"5f02":function(e,t,a){"use strict";a("93dd")},"93dd":function(e,t,a){},a8ca:function(e,t,a){}}]);