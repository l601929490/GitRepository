(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54687816"],{"23d7":function(t,o,e){"use strict";e.d(o,"c",(function(){return s})),e.d(o,"o",(function(){return i})),e.d(o,"q",(function(){return a})),e.d(o,"h",(function(){return l})),e.d(o,"j",(function(){return r})),e.d(o,"d",(function(){return c})),e.d(o,"n",(function(){return d})),e.d(o,"k",(function(){return u})),e.d(o,"l",(function(){return h})),e.d(o,"m",(function(){return m})),e.d(o,"f",(function(){return g})),e.d(o,"b",(function(){return p})),e.d(o,"e",(function(){return b})),e.d(o,"p",(function(){return f})),e.d(o,"i",(function(){return y})),e.d(o,"g",(function(){return I})),e.d(o,"a",(function(){return v}));var n=e("b775");function s(t){return Object(n["a"])({url:"/addScoreGoods",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/queryScoreDisable",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/updateScoreDisable",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/queryGoodsBySchoolId",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/queryGoodsTypeBySchoolId",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/deleteGoodsByGoodsId",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/applet/querySchoolByCompanyId",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/queryOrderByOrderNum",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/queryOrderBySchoolId",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/queryOrderYwcAndDshNum",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/getOrderNum",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/addGoodsType",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/deleteGoodsType",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/queryScoreSumBySchoolId",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/queryGoodsDetailByStudentId",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/queryDynamicConditionBySchoolId",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/addDynamicCondition",method:"post",data:t})}},"289c":function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"content-body"},[t._m(0),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)",data:t.schoolList,"tooltip-effect":"dark",height:t.tableHeight},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"80",fixed:""}}),e("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),e("el-table-column",{attrs:{label:"校区",prop:"schoolName",width:"120"}}),e("el-table-column",{attrs:{label:"积分规则",sortable:"",prop:"",width:"120"}},[[e("el-button",{staticClass:"seeItem",attrs:{size:"mini"},on:{click:t.addclick}},[t._v("查看 / 编辑")])]],2)],1),e("div",{staticClass:"table-page__action"}),e("div",{staticClass:"addDialog"},[e("el-dialog",{attrs:{title:"修改积分规则",width:"600px","close-on-click-modal":!1,visible:t.isaddmaskshow},on:{"update:visible":function(o){t.isaddmaskshow=o}}},[e("el-form",{ref:"addForm",attrs:{"label-width":"80px",model:t.addForm}},[1==t.schoolList.length?e("el-form-item",{attrs:{label:"所在校区",prop:"goodsSchool"}},[e("el-select",{attrs:{placeholder:"请选择商品上架校区",disabled:""},model:{value:t.schoolList[0].schoolName,callback:function(o){t.$set(t.schoolList[0],"schoolName",o)},expression:"schoolList[0].schoolName"}})],1):e("el-form-item",{attrs:{label:"所在校区",prop:"goodsSchool"}},[e("el-select",{attrs:{placeholder:"请选择商品上架校区"},on:{change:t.changeSchoolId},model:{value:t.addForm.goodsSchool,callback:function(o){t.$set(t.addForm,"goodsSchool",o)},expression:"addForm.goodsSchool"}},t._l(t.schoolList,(function(t){return e("el-option",{key:t.schoolId,attrs:{value:t.schoolId,label:t.schoolName}})})),1)],1),e("el-form-item",{attrs:{label:"签到",prop:"applyTitle"}},[e("label",{attrs:{slot:"label"},slot:"label"},[t._v(" 签到 ")]),e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.rulesList.loginDynamicCondition,callback:function(o){t.$set(t.rulesList,"loginDynamicCondition",o)},expression:"rulesList.loginDynamicCondition"}})],1),e("el-form-item",{attrs:{label:"打卡",prop:"applyTitle"}},[e("label",{attrs:{slot:"label"},slot:"label"},[t._v(" 作业打卡 ")]),e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.rulesList.clockDynamicCondition,callback:function(o){t.$set(t.rulesList,"clockDynamicCondition",o)},expression:"rulesList.clockDynamicCondition"}})],1),e("el-form-item",{attrs:{label:"打卡通过",prop:"applyTitle"}},[e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.rulesList.reviewDynamicCondition,callback:function(o){t.$set(t.rulesList,"reviewDynamicCondition",o)},expression:"rulesList.reviewDynamicCondition"}})],1),e("el-form-item",{attrs:{label:"打卡评优",prop:"applyTitle"}},[e("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.rulesList.goodDynamicCondition,callback:function(o){t.$set(t.rulesList,"goodDynamicCondition",o)},expression:"rulesList.goodDynamicCondition"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"noadd",on:{click:t.noaddclick}},[t._v("取消")]),e("el-button",{staticClass:"okadd",attrs:{type:"primary"},on:{click:t.okaddclick}},[t._v("确认")])],1)],1)],1),e("div",{staticClass:"personGoodsShow"},[e("el-dialog",{attrs:{title:"编辑核销员",width:"600px","close-on-click-modal":!1,visible:t.personGoodsShow},on:{"update:visible":function(o){t.personGoodsShow=o}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",height:"350"}},[e("el-table-column",{attrs:{prop:"",label:"老师姓名",width:""}}),e("el-table-column",{attrs:{prop:"",label:"手机号",width:""}}),e("el-table-column",{attrs:{prop:"",label:"绑定时间",width:""}}),e("el-table-column",{attrs:{prop:"",label:"校区",width:""}}),e("el-table-column",{attrs:{prop:"",label:"操作",width:""}})],1)],1),e("div")],1)],1)},s=[function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"table-action"},[e("div",{staticClass:"lf"}),e("div",{staticClass:"rt"})])}],i=(e("d81d"),e("9dac")),a=e("23d7"),l=(e("4260"),{components:{upload:i["a"]},data:function(){return{rules:[],tableHeight:window.innerHeight-210,tableData:[],isaddmaskshow:!1,iseditmaskshow:!1,personGoodsShow:!1,editContent:"",multipleSelection:[],valLength:"",searchInfo:"",timeout:null,pageCount:null,pageDataList:[],schoolId:"",teacherIds:"",loading:!1,adminName:"",num:0,addForm:{goodsSchool:""},storageArr:{companyId:"",schoolId:"",school:""},schoolList:[],rulesList:[]}},mounted:function(){this.getStorage(),this.getSchool()},methods:{getSchool:function(){var t=this;this.storageArr.school.map((function(o){o.schoolId==t.storageArr.schoolId&&(t.schoolList=[{schoolId:o.schoolId,schoolName:o.schoolName}])})),this.getIntegralRule(this.schoolList[0].schoolId)},getStorage:function(){this.storageArr.companyId=window.sessionStorage.getItem("companyId"),this.storageArr.schoolId=window.sessionStorage.getItem("schoolId"),this.storageArr.school=JSON.parse(window.sessionStorage.getItem("school"))},changeSchoolId:function(){this.getIntegralRule(this.addForm.goodsSchool)},getIntegralRule:function(t){var o=this;Object(a["g"])({schoolId:t}).then((function(t){o.rulesList=t.data}))},searchSchool:function(){var t=this;Object(a["n"])({companyId:window.sessionStorage.getItem("companyId")}).then((function(o){1==o.code?t.schoolList=[]:0==o.code&&(t.schoolList=o.msg),t.schoolList.length>1&&(t.storageArr.school.map((function(o){(o.schoolId=t.storageArr.schoolId)&&(t.addForm.goodsSchool={schoolId:t.storageArr.school.schoolId,schoolName:t.storageArr.school.schoolName})})),t.getIntegralRule(t.schoolList[0].schoolId))}))},rules_edit:function(){var t=this;Object(a["a"])({schoolId:this.rulesList.schoolId,dynamicConditionId:this.rulesList.dynamicConditionId,reviewDynamicCondition:this.rulesList.reviewDynamicCondition,shareDynamicCondition:this.rulesList.shareDynamicCondition,clockDynamicCondition:this.rulesList.clockDynamicCondition,loginDynamicCondition:this.rulesList.loginDynamicCondition}).then((function(o){0==o.code?t.$message.success(o.msg):1==o.code&&t.$message.error(o.msg),t.isaddmaskshow=!1}))},addclick:function(){var t=this;this.storageArr.school.map((function(o){o.schoolId==t.storageArr.schoolId&&(t.schoolList=[{schoolId:o.schoolId,schoolName:o.schoolName}])})),this.getIntegralRule(this.schoolList[0].schoolId),this.isaddmaskshow=!0,console.log(this.schoolList,this.storageArr.school)},noaddclick:function(){this.isaddmaskshow=!1},okaddclick:function(){this.rules_edit()},handleSelectionChange:function(t){this.multipleSelection=t,this.valLength=t.length}}}),r=l,c=(e("ac75"),e("2877")),d=Object(c["a"])(r,n,s,!1,null,"797d4988",null);o["default"]=d.exports},4260:function(t,o,e){"use strict";e.d(o,"a",(function(){return n})),e.d(o,"b",(function(){return s})),e.d(o,"c",(function(){return i}));e("99af"),e("d3b7"),e("25f0");function n(t){var o,e=a(t);if("array"===e)o=[];else{if("object"!==e)return t;o={}}if("array"===e)for(var s=0,i=t.length;s<i;s++)o.push(n(t[s]));else if("object"===e)for(var l in t)o[l]=n(t[l]);return o}function s(t,o){var e=new Date(t),n=e.getFullYear(),s=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?"0"+e.getDate():e.getDate();e.getHours(),e.getHours(),e.getMinutes(),e.getMinutes(),e.getSeconds(),e.getSeconds();return"".concat(n,"-").concat(s,"-").concat(i)}function i(t,o){var e=new Date(t),n=e.getFullYear(),s=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getHours()<10?"0"+e.getHours():e.getHours(),l=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return"yyyy-MM-dd"==o?"".concat(n,"-").concat(s,"-").concat(i):"".concat(n,"-").concat(s,"-").concat(i," ").concat(a,":").concat(l,":").concat(r)}function a(t){var o=Object.prototype.toString,e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return t instanceof Element?"element":e[o.call(t)]}},ac75:function(t,o,e){"use strict";e("f8e3")},f8e3:function(t,o,e){}}]);