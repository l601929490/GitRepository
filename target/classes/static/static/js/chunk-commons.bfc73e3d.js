(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"9dac":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("input",{ref:"file",attrs:{type:"file",hidden:"",accept:e.currentAccept},on:{change:e.fileChange}}),"url"==e.upMode?i("div",{staticStyle:{width:"100%",display:"inline-flex"}},[i("el-input",{attrs:{value:e.value,disabled:""}}),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.btnChange}},[e._v(e._s(e.autoUpload?e.label:"选择文件"))]),!e.autoUpload&&e.loadButton?i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.uploadClick}},[e._v(e._s(e.label))]):e._e()],1):"head"==e.upMode?i("div",{staticClass:"upmode-head"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"el-upload el-upload--picture-card",on:{click:e.btnChange}},[e.value?e.isVideo(e.value)?i("video",{staticClass:"upload-preview",attrs:{controls:"",src:e.value}}):e.isAudio(e.value)?i("audio",{staticClass:"upload-preview",attrs:{controls:"",src:e.value}}):i("img",{staticClass:"upload-preview",attrs:{src:e.value}}):i("i",{staticClass:"el-icon-plus"})]),!e.autoUpload&&e.loadButton?i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.uploadClick}},[e._v(e._s(e.label))]):e._e()],1):"variable"==e.upMode?i("div",{staticClass:"el-upload-dragger",on:{click:e.btnChange}},[e.value?i("img",{attrs:{src:e.value}}):i("div",[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[i("em",[e._v(e._s(e.label))])])])]):e._e()])},n=[],o=(i("4160"),i("caad"),i("b64b"),i("ac1f"),i("1276"),i("159b"),{Config:{UploadSize:1e3}}),s={props:{video:Boolean,audio:Boolean,label:{type:String,default:"上传"},accept:{String:String,default:"image/jpeg,image/png,image/x-icon"},autoUpload:{type:Boolean,default:!0},loadButton:{type:Boolean,default:!0},value:String,action:{type:String,default:"https://edu.siwonet.com/fileUpload"},params:Object,upMode:{type:String,default:"head"}},computed:{currentAccept:function(){return this.video?"video/*":this.audio?"audio/*":this.accept}},data:function(){return{isLoading:!1,companyId:""}},methods:{isVideo:function(e){return!!this.video||"video"==this.getFileType(e)},isAudio:function(e){return!!this.audio||"audio"==this.getFileType(e)},getFileType:function(e){var t=e.split(".").pop().toLocaleLowerCase();return["mov","rmvb","rm","FLV","mp4","3GP","avi"].includes(t)?"video":["wav","mp3","wma","cda","aif","mid","aifc","aif","acm","asf"].includes(t)?"audio":"image"},btnChange:function(){var e=this.$refs.file;e.click()},fileChange:function(e){try{var t=this.getFile();if(null==t)return;if(!this.beforeUpload(t))return;if(this.autoUpload)this.submit(t);else{if("url"==this.upMode)return;var i=new FileReader;i.readAsDataURL(t),i.onload=function(e){}}}catch(a){console.debug("choice file err:",a)}},beforeUpload:function(e){var t=o.Config.UploadSize;return!(e.size/1024/1024>t)||(this.$message.error("上传文件大小不能超过"+t+"M."),!1)},uploadClick:function(e){this.submit()},extendParams:function(e){var t=this;this.params&&e&&Object.keys(this.params).forEach((function(i){return e.append(i,t.params[i])}))},submit:function(e){var t=this;try{if(this.isLoading=!0,e||(e=this.getFile()),null==e)return;var i=!0;if(this.$emit("onbefore",e),!i)return;var a=this.action,n=new window.FormData;n.append("fileType","category"),n.append("file",e),this.extendParams(n);var o=new XMLHttpRequest;o.open("POST",a,!0),o.send(n),o.onerror=function(e){},o.onload=function(){if(t.isLoading=!1,200===o.status){var e=JSON.parse(o.responseText),i=e.data,a=e.videoTime;t.imageurl=e.data,t.$emit("input",i),t.$emit("videoTime",a),t.$emit("onsuccess",i),t.$emit("onsuccess",i),e.msg?t.$message.error(e.msg+"(注意:文件名不能为中文)"):t.$message.success("上传成功")}}}catch(s){this.isLoading=!1,console.error("upload file err:",s),this.$message(res.msg)}},getFile:function(){var e=this.$refs.file;return 0==e.files.length?(this.$message("没有选择文件"),null):e.files[0]}}},l=s,r=(i("9f2a"),i("2877")),u=Object(r["a"])(l,a,n,!1,null,null,null);t["a"]=u.exports},"9f2a":function(e,t,i){"use strict";i("b6f4")},b6f4:function(e,t,i){},ceb0:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{ref:"editor",staticStyle:{"text-align":"left"}})])},n=[],o=i("6fad"),s=i.n(o),l={name:"editor",props:{value:String},data:function(){return{editorContent:"",txt:null}},watch:{value:function(){this.initValue()}},methods:{getContent:function(){this.$emit("input",this.editorContent)},initValue:function(){this.txt.html(this.value),this.editorContent=this.value}},mounted:function(){var e=this,t=sessionStorage.getItem("companyId"),i=new s.a(this.$refs.editor);i.config.onchange=function(t){e.editorContent=t,e.getContent()},i.config.uploadImgServer="https://edu.siwonet.com/fileUpload?companyId="+t,i.config.uploadFileName="file",i.config.uploadImgHooks={customInsert:function(e,t,i){var a=t.data;e(a)}},i.create(),this.txt=i.txt,this.initValue()}},r=l,u=i("2877"),c=Object(u["a"])(r,a,n,!1,null,null,null);t["a"]=c.exports}}]);